(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{435:function(a,s,n){a.exports=n.p+"assets/img/28.cdd2f77c.png"},436:function(a,s,n){a.exports=n.p+"assets/img/29.6c48f589.png"},492:function(a,s,n){"use strict";n.r(s);var t=n(2),e=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"拖拽api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#拖拽api"}},[a._v("#")]),a._v(" 拖拽API")]),a._v(" "),s("h3",{attrs:{id:"研究对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#研究对象"}},[a._v("#")]),a._v(" 研究对象")]),a._v(" "),s("ul",[s("li",[a._v("拖拽元素\n普通元素设置draggable属性为true")]),a._v(" "),s("li",[a._v("拖放区域")])]),a._v(" "),s("p",[s("img",{attrs:{src:n(435),alt:"alt text"}})]),a._v(" "),s("h3",{attrs:{id:"事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事件"}},[a._v("#")]),a._v(" 事件")]),a._v(" "),s("p",[s("strong",[a._v("拖拽元素相关事件")]),a._v("\ndragstart: 开始拖拽\ndrag: 拖拽过程中\ndragend: 拖拽结束")]),a._v(" "),s("p",[s("strong",[a._v("拖放区域相关事件")]),a._v("\ndragenter: 拖拽元素进入区域\ndragover: 拖拽元素在区域内移动\ndragleave: 拖拽元素离开区域\ndrop: 拖拽元素在区域内释放")]),a._v(" "),s("blockquote",[s("p",[a._v("补充1：对于dragover事件，默认情况下元素是不允许其他元素在它上面移动的，需要取消默认行为")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('  拖放区域.addEventListener("dragover", (e) => {\n    e.preventDefault();\n  });\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("blockquote",[s("p",[a._v("补充2：对于drop事件，默认情况下输入框能显示拖过来的文本或链接,也可以取消默认行为")])]),a._v(" "),s("h3",{attrs:{id:"实现拖拽元素移动到拖放区域内"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现拖拽元素移动到拖放区域内"}},[a._v("#")]),a._v(" 实现拖拽元素移动到拖放区域内")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('1. 拖放区域取消dropover默认行为\n\n2. 当拖拽元素在拖放区域内释放时，将拖拽元素放到拖放区域内\n\n拖放区域.addEventListener("drop", (e) => {\n    拖放区域.appendChild(拖拽元素);\n})\n\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h3",{attrs:{id:"数据传递"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据传递"}},[a._v("#")]),a._v(" 数据传递")]),a._v(" "),s("p",[a._v("拖拽过程和拖放过程进行数据传递靠：dataTransfer对象")]),a._v(" "),s("h4",{attrs:{id:"datatransfer对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#datatransfer对象"}},[a._v("#")]),a._v(" dataTransfer对象")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("setData(format, data)")]),a._v(": 设置数据")]),a._v(" "),s("li",[s("strong",[a._v("getData(format)")]),a._v(": 获取数据")]),a._v(" "),s("li",[a._v("setDragImage(image, x, y): 设置拖拽图标(即：拖拽过程中跟随鼠标的半透明图片)")]),a._v(" "),s("li",[a._v("dropEffect: 设置拖放图标(即：拖放操作时类似鼠标光标反馈的效果)")])]),a._v(" "),s("h4",{attrs:{id:"将内容拖到拖放区域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将内容拖到拖放区域"}},[a._v("#")]),a._v(" 将内容拖到拖放区域")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('dragstart时：\n// 存文本数据\n dataTransfer.setData("text/plain", 内容);\n // 设置拖拽图标\n // 补充0,0表示图标相对鼠标的偏移\n dataTransfer.setDragImage(拖拽图标, 0, 0); \n\ndragover时：\n // 设置拖放图标\n dataTransfer.dropEffect = "copy";\n 取消默认行为\n\n drop时：\n // 获取文本数据\n var content = dataTransfer.getData("text/plain");\n 拖放区域.innerHTML = content;\n 拖放元素.remove();\n\n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br"),s("span",{staticClass:"line-number"},[a._v("18")]),s("br")])]),s("h3",{attrs:{id:"实现拖拽排序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现拖拽排序"}},[a._v("#")]),a._v(" 实现拖拽排序")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("dragstart时：\n 给拖拽元素加个半透明样式(可选)\n 暂存拖拽元素\n\ndragend时：\n 去除拖拽yuan元素的半透明样式\n 释放暂存的拖拽元素\n\n dragover时：\n  判断、换位(插入操作实现换位)\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br")])]),s("blockquote",[s("p",[a._v("dragstart和dragend可以理解成生命周期中的初始化和结束")])]),a._v(" "),s("h4",{attrs:{id:"核心-判断、换位"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心-判断、换位"}},[a._v("#")]),a._v(" 核心：判断、换位")]),a._v(" "),s("p",[s("strong",[a._v("目标元素：被比较的元素，即：要和拖拽元素进行比较")])]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("if(目标元素不是拖拽元素自己 && 目标元素一定是LI元素) {\n  // 鼠标的y坐标减去目标元素的top坐标\n  const tHeight = 计算出鼠标在目标元素上的位置;\n  if(tHeight < 目标元素高度的一半) {\n    // insertBefore(拖拽元素, 目标元素)\n    拖拽元素插入到目标元素前面\n  } else {\n    // insertAfter(拖拽元素, 目标元素)\n    拖拽元素插入到目标元素后面\n  }\n}\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br")])]),s("p",[s("img",{attrs:{src:n(436),alt:"alt text"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);