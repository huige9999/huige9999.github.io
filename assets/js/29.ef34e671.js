(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{509:function(s,a,e){"use strict";e.r(a);var n=e(2),t=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("性能优化包括三个方面：")]),s._v(" "),a("ul",[a("li",[s._v("构建性能")]),s._v(" "),a("li",[s._v("传输性能")]),s._v(" "),a("li",[s._v("运行性能")])]),s._v(" "),a("h3",{attrs:{id:"构建性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建性能"}},[s._v("#")]),s._v(" 构建性能")]),s._v(" "),a("p",[s._v("这里所说的构建性能，是指在"),a("strong",[s._v("开发阶段的构建性能")]),s._v("，而不是生产环境的构建性能")]),s._v(" "),a("p",[s._v("优化的目标，"),a("strong",[s._v("是降低从打包开始，到代码效果呈现所经过的时间")])]),s._v(" "),a("p",[s._v("构建性能会影响开发效率。构建性能越高，开发过程中时间的浪费越少")]),s._v(" "),a("h3",{attrs:{id:"传输性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#传输性能"}},[s._v("#")]),s._v(" 传输性能")]),s._v(" "),a("p",[s._v("传输性能是指，打包后的JS代码传输到浏览器经过的时间")]),s._v(" "),a("p",[s._v("在优化传输性能时要考虑到：")]),s._v(" "),a("ol",[a("li",[s._v("总传输量：所有需要传输的JS文件的内容加起来，就是总传输量，重复代码越少，总传输量越少")]),s._v(" "),a("li",[s._v("文件数量：当访问页面时，需要传输的JS文件数量，文件数量越多，http请求越多，响应速度越慢")]),s._v(" "),a("li",[s._v("浏览器缓存：JS文件会被浏览器缓存，被缓存的文件不会再进行传输")])]),s._v(" "),a("h3",{attrs:{id:"运行性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行性能"}},[s._v("#")]),s._v(" 运行性能")]),s._v(" "),a("p",[s._v("运行性能是指，JS代码在浏览器端的运行速度")]),s._v(" "),a("p",[s._v("它主要取决于我们如何书写高性能的代码")]),s._v(" "),a("blockquote",[a("p",[s._v("注：永远不要过早的关注于性能，因为你在开发的时候，无法完全预知最终的运行性能，过早的关注性能会极大的降低开发效率")])]),s._v(" "),a("p",[a("strong",[s._v("性能优化没有完美的解决方案，需要具体情况具体分析")])]),s._v(" "),a("h2",{attrs:{id:"减少模块解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#减少模块解析"}},[s._v("#")]),s._v(" 减少模块解析")]),s._v(" "),a("h3",{attrs:{id:"什么叫做模块解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么叫做模块解析"}},[s._v("#")]),s._v(" 什么叫做模块解析？")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image.png",alt:"alt text"}}),s._v("\n模块解析包括：抽象语法树分析、依赖分析、模块语法替换")]),s._v(" "),a("h3",{attrs:{id:"不做模块解析会怎样"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#不做模块解析会怎样"}},[s._v("#")]),s._v(" 不做模块解析会怎样？")]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-1.png",alt:"alt text"}}),s._v("\n如果某个模块不做解析，该模块经过loader处理后的代码就是最终代码。")]),s._v(" "),a("p",[s._v("如果没有loader对该模块进行处理，该模块的源码就是最终打包结果的代码。")]),s._v(" "),a("p",[s._v("如果不对某个模块进行解析，可以缩短构建时间")]),s._v(" "),a("h3",{attrs:{id:"哪些模块不需要解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#哪些模块不需要解析"}},[s._v("#")]),s._v(" 哪些模块不需要解析？")]),s._v(" "),a("p",[s._v("模块中无其他依赖：一些已经打包好的第三方库，比如jquery")]),s._v(" "),a("h3",{attrs:{id:"如何让某个模块不要解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何让某个模块不要解析"}},[s._v("#")]),s._v(" 如何让某个模块不要解析？")]),s._v(" "),a("p",[s._v("配置"),a("code",[s._v("module.noParse")]),s._v("，它是一个正则，被正则匹配到的模块不会解析")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("module.exports = {\n    module: {\n        noParse: /test/\n    }\n}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"优化loader性能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#优化loader性能"}},[s._v("#")]),s._v(" 优化loader性能")]),s._v(" "),a("h3",{attrs:{id:"进一步限制loader的应用范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进一步限制loader的应用范围"}},[s._v("#")]),s._v(" 进一步限制loader的应用范围")]),s._v(" "),a("p",[s._v("思路是：对于某些库，不使用loader")]),s._v(" "),a("p",[s._v("例如：babel-loader可以转换ES6或更高版本的语法，可是有些库本身就是用ES5语法书写的，不需要转换，使用babel-loader反而会浪费构建时间")]),s._v(" "),a("p",[s._v("lodash就是这样的一个库")]),s._v(" "),a("blockquote",[a("p",[s._v("lodash是在ES5之前出现的库，使用的是ES3语法")])]),s._v(" "),a("p",[s._v("通过"),a("code",[s._v("module.rule.exclude")]),s._v("或"),a("code",[s._v("module.rule.include")]),s._v("，排除或仅包含需要应用loader的场景")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('module.exports = {\n    module: {\n        rules: [\n            {\n                test: /\\.js$/,\n                exclude: /lodash/,\n                //  exclude: /node_modules/, 如果暴力点直接排除node_modules\n                use: "babel-loader"\n            }\n        ]\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("blockquote",[a("p",[s._v("这种做法是对loader的范围进行进一步的限制，和noParse不冲突，因为流程是：拿到源代码后->loader处理->抽象语法转换、依赖分析等\nnoParse影响得是抽象语法转换、依赖分析等这个过程，而exclude影响得是loader处理这个过程")])]),s._v(" "),a("h3",{attrs:{id:"缓存loader的结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存loader的结果"}},[s._v("#")]),s._v(" 缓存loader的结果")]),s._v(" "),a("p",[s._v("我们可以基于一种假设：如果某个文件内容不变，经过相同的loader解析后，解析后的结果也不变")]),s._v(" "),a("p",[s._v("于是，可以将loader的解析结果保存下来，让后续的解析直接使用保存的结果")]),s._v(" "),a("p",[a("code",[s._v("cache-loader")]),s._v("可以实现这样的功能")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("module.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: ['cache-loader', ...loaders]\n      },\n    ],\n  },\n};\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("有趣的是，"),a("code",[s._v("cache-loader")]),s._v("放到最前面，却能够决定后续的loader是否运行")]),s._v(" "),a("p",[s._v("实际上，loader的运行过程中，还包含一个过程，即"),a("code",[s._v("pitch")]),s._v(" "),a("img",{attrs:{src:"image/image-2.png",alt:"alt text"}})]),s._v(" "),a("p",[s._v("pitch阶段如果发现有缓存会直接将缓存得代码像图中一样返回给执行阶段对应的loader处理。\n比如：loader3有缓存，那么执行阶段只需经过loader2和loader1")]),s._v(" "),a("h3",{attrs:{id:"为loader的运行开启多线程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为loader的运行开启多线程"}},[s._v("#")]),s._v(" 为loader的运行开启多线程")]),s._v(" "),a("p",[s._v("thread-loader会开启一个线程池，线程池中包含适量的线程")]),s._v(" "),a("p",[s._v("它会把后续的loader(配置在thread-loader之后的loader)放到线程池的线程中运行，以提高构建效率")]),s._v(" "),a("p",[s._v("由于后续的loader会放到新的线程中，所以，后续的loader不能：")]),s._v(" "),a("ul",[a("li",[s._v("使用 webpack api 生成文件")]),s._v(" "),a("li",[s._v("无法使用自定义的 plugin api")]),s._v(" "),a("li",[s._v("无法访问 webpack options")])]),s._v(" "),a("blockquote",[a("p",[s._v("在实际的开发中，可以进行测试，来决定thread-loader放到什么位置")])]),s._v(" "),a("p",[a("strong",[s._v("特别注意，开启和管理线程需要消耗时间，在小型项目中使用thread-loader反而会增加构建时间")])]),s._v(" "),a("h2",{attrs:{id:"热替换hmr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#热替换hmr"}},[s._v("#")]),s._v(" 热替换HMR")]),s._v(" "),a("blockquote",[a("p",[s._v("热替换并不能降低构建时间（可能还会稍微增加），但可以降低代码改动到效果呈现的时间\n当使用"),a("code",[s._v("webpack-dev-server")]),s._v("时，考虑代码改动到效果呈现的过程")])]),s._v(" "),a("p",[a("img",{attrs:{src:"image/image-3.png",alt:"alt text"}})]),s._v(" "),a("p",[s._v("而使用了热替换后，流程发生了变化\n"),a("img",{attrs:{src:"image/image-4.png",alt:"alt text"}})]),s._v(" "),a("h3",{attrs:{id:"使用和原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用和原理"}},[s._v("#")]),s._v(" 使用和原理")]),s._v(" "),a("ol",[a("li",[s._v("更改配置")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("module.exports = {\n  devServer:{\n    hot:true // 开启HMR\n  },\n  plugins:[ \n    // 可选\n    new webpack.HotModuleReplacementPlugin()\n  ]\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("更改了代码")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// index.js\n\nif(module.hot){ // 是否开启了热更新\n  module.hot.accept() // 接受热更新\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("首先，这段代码会参与最终运行！")]),s._v(" "),a("p",[s._v("当开启了热更新后，"),a("code",[s._v("webpack-dev-server")]),s._v("会向打包结果中注入"),a("code",[s._v("module.hot")]),s._v("属性")]),s._v(" "),a("p",[s._v("默认情况下，"),a("code",[s._v("webpack-dev-server")]),s._v("不管是否开启了热更新，当重新打包后，都会调用"),a("code",[s._v("location.reload")]),s._v("刷新页面")]),s._v(" "),a("p",[s._v("但如果运行了"),a("code",[s._v("module.hot.accept()")]),s._v("，将改变这一行为")]),s._v(" "),a("p",[a("code",[s._v("module.hot.accept()")]),s._v("的作用是让"),a("code",[s._v("webpack-dev-server")]),s._v("通过"),a("code",[s._v("socket")]),s._v("管道，把服务器更新的内容发送到浏览器\n"),a("img",{attrs:{src:"image/image-5.png",alt:"alt text"}}),s._v("\n然后，将结果交给插件"),a("code",[s._v("HotModuleReplacementPlugin")]),s._v("注入的代码执行")]),s._v(" "),a("p",[s._v("插件"),a("code",[s._v("HotModuleReplacementPlugin")]),s._v("会根据覆盖原始代码，然后让代码重新执行")]),s._v(" "),a("p",[a("strong",[s._v("所以，热替换发生在代码运行期")])]),s._v(" "),a("h3",{attrs:{id:"样式热替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#样式热替换"}},[s._v("#")]),s._v(" 样式热替换")]),s._v(" "),a("p",[s._v("对于样式也是可以使用热替换的，但需要使用"),a("code",[s._v("style-loader")])]),s._v(" "),a("p",[s._v("因为热替换发生时，"),a("code",[s._v("HotModuleReplacementPlugin")]),s._v("只会简单的重新运行模块代码")]),s._v(" "),a("p",[s._v("因此"),a("code",[s._v("style-loader")]),s._v("的代码一运行，就会重新设置"),a("code",[s._v("style")]),s._v("元素中的样式")]),s._v(" "),a("p",[s._v("而"),a("code",[s._v("mini-css-extract-plugin")]),s._v("，由于它生成文件是在"),a("strong",[s._v("构建期间")]),s._v("，运行期间并会也无法改动文件，因此它对于热替换是无效的")]),s._v(" "),a("h2",{attrs:{id:"手动分包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动分包"}},[s._v("#")]),s._v(" 手动分包")]),s._v(" "),a("h3",{attrs:{id:"基本原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本原理"}},[s._v("#")]),s._v(" 基本原理")]),s._v(" "),a("p",[s._v("手动分包的总体思路是：")]),s._v(" "),a("ol",[a("li",[s._v("先单独的打包公共模块\n"),a("img",{attrs:{src:"image/image-6.png",alt:"alt text"}})])]),s._v(" "),a("p",[s._v("公共模块会被打包成为动态链接库(dll Dynamic Link Library)，并生成资源清单")]),s._v(" "),a("blockquote",[a("p",[s._v("简单理解dll: DLL 是一个拥有共享 API 的文件，包含可被多处引用的公共功能")])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("根据入口模块进行正常打包")])]),s._v(" "),a("p",[s._v("打包时，如果发现模块中使用了资源清单中描述的模块，则不会形成下面的代码结构")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('//源码，入口文件index.js\nimport $ from "jquery"\nimport _ from "lodash"\n_.isArray($(".red"));\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("由于资源清单中包含"),a("code",[s._v("jquery")]),s._v("和"),a("code",[s._v("lodash")]),s._v("两个模块，因此打包结果的大致格式是：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('function(modules){\n  //...\n})({\n  // index.js文件的打包结果并没有变化\n  "./src/index.js":\n  function(module, exports, __webpack_require__){\n    var $ = __webpack_require__("./node_modules/jquery/index.js")\n    var _ = __webpack_require__("./node_modules/lodash/index.js")\n    _.isArray($(".red"));\n  },\n  // 由于资源清单中存在，jquery的代码并不会出现在这里\n  "./node_modules/jquery/index.js":\n  function(module, exports, __webpack_require__){\n    module.exports = jquery;\n  },\n  // 由于资源清单中存在，lodash的代码并不会出现在这里\n  "./node_modules/lodash/index.js":\n  function(module, exports, __webpack_require__){\n    module.exports = lodash;\n  }\n})\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h3",{attrs:{id:"打包公共模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包公共模块"}},[s._v("#")]),s._v(" 打包公共模块")]),s._v(" "),a("p",[s._v("打包公共模块是一个"),a("strong",[s._v("独立的")]),s._v("打包过程")]),s._v(" "),a("ol",[a("li",[s._v("单独打包公共模块，暴露变量名")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// webpack.dll.config.js\nmodule.exports = {\n  mode: "production",\n  entry: {\n    jquery: ["jquery"],\n    lodash: ["lodash"]\n  },\n  output: {\n    filename: "dll/[name].js",\n    library: "[name]"\n  }\n};\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("利用"),a("code",[s._v("DllPlugin")]),s._v("生成资源清单")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('// webpack.dll.config.js\nmodule.exports = {\n  plugins: [\n    new webpack.DllPlugin({\n      path: path.resolve(__dirname, "dll", "[name].manifest.json"), //资源清单的保存位置\n      name: "[name]"//资源清单中，暴露的变量名\n    })\n  ]\n};\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("运行后，即可完成公共模块打包")]),s._v(" "),a("h3",{attrs:{id:"使用公共模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用公共模块"}},[s._v("#")]),s._v(" 使用公共模块")]),s._v(" "),a("ol",[a("li",[s._v("在页面中手动引入公共模块")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('<script src="./dll/jquery.js"><\/script>\n<script src="./dll/lodash.js"><\/script>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("重新设置"),a("code",[s._v("clean-webpack-plugin")])])]),s._v(" "),a("p",[s._v("如果使用了插件"),a("code",[s._v("clean-webpack-plugin")]),s._v("，为了避免它把公共模块清除，需要做出以下配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("new CleanWebpackPlugin({\n  // 要清除的文件或目录\n  // 排除掉dll目录本身和它里面的文件\n  cleanOnceBeforeBuildPatterns: [\"**/*\", '!dll', '!dll/*']\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("blockquote",[a("p",[s._v("目录和文件的匹配规则使用的是[globbing patterns]")])]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("使用"),a("code",[s._v("DllReferencePlugin")]),s._v("控制打包结果")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('module.exports = {\n  plugins:[\n    new webpack.DllReferencePlugin({\n      manifest: require("./dll/jquery.manifest.json")\n    }),\n    new webpack.DllReferencePlugin({\n      manifest: require("./dll/lodash.manifest.json")\n    })\n  ]\n}\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),a("p",[a("strong",[s._v("手动打包的过程")]),s._v("：")]),s._v(" "),a("ol",[a("li",[s._v("开启"),a("code",[s._v("output.library")]),s._v("暴露公共模块")]),s._v(" "),a("li",[s._v("用"),a("code",[s._v("DllPlugin")]),s._v("创建资源清单")]),s._v(" "),a("li",[s._v("用"),a("code",[s._v("DllReferencePlugin")]),s._v("使用资源清单")])]),s._v(" "),a("p",[a("strong",[s._v("手动打包的注意事项")]),s._v("：")]),s._v(" "),a("ol",[a("li",[s._v("资源清单不参与运行，可以不放到打包目录中")]),s._v(" "),a("li",[s._v("记得手动引入公共JS，以及避免被删除")]),s._v(" "),a("li",[s._v("不要对小型的公共JS库使用")])]),s._v(" "),a("p",[a("strong",[s._v("优点")]),s._v("：")]),s._v(" "),a("ol",[a("li",[s._v("极大提升自身模块的打包速度")]),s._v(" "),a("li",[s._v("极大的缩小了自身文件体积")]),s._v(" "),a("li",[s._v("有利于浏览器缓存第三方库的公共代码")])]),s._v(" "),a("p",[a("strong",[s._v("缺点")]),s._v("：")]),s._v(" "),a("ol",[a("li",[s._v("使用非常繁琐")]),s._v(" "),a("li",[s._v("如果第三方库中包含重复代码，则效果不太理想")])]),s._v(" "),a("h2",{attrs:{id:"自动分包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动分包"}},[s._v("#")]),s._v(" 自动分包")]),s._v(" "),a("h3",{attrs:{id:"基本原理-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本原理-2"}},[s._v("#")]),s._v(" 基本原理")]),s._v(" "),a("p",[s._v("不同与手动分包，自动分包是从"),a("strong",[s._v("实际的角度")]),s._v("出发，从一个更加"),a("strong",[s._v("宏观的角度")]),s._v("来控制分包，而一般不对具体哪个包要分出去进行控制")]),s._v(" "),a("p",[s._v("因此使用自动分包，不仅非常方便，而且更加贴合实际的开发需要")]),s._v(" "),a("p",[s._v("要控制自动分包，关键是要配置一个合理的"),a("strong",[s._v("分包策略")])]),s._v(" "),a("p",[s._v("有了分包策略之后，不需要额外安装任何插件，webpack会自动的按照策略进行分包")]),s._v(" "),a("blockquote",[a("p",[s._v("实际上，webpack在内部是使用"),a("code",[s._v("SplitChunksPlugin")]),s._v("进行分包的\n"),a("img",{attrs:{src:"image/image-7.png",alt:"alt text"}})])]),s._v(" "),a("p",[s._v("从分包流程中至少可以看出以下几点：")]),s._v(" "),a("ul",[a("li",[s._v("分包策略至关重要，它决定了如何分包")]),s._v(" "),a("li",[s._v("分包时，webpack开启了一个"),a("strong",[s._v("新的chunk")]),s._v("，对分离的模块进行打包")]),s._v(" "),a("li",[s._v("打包结果中，公共的部分被提取出来形成了一个单独的文件，它是新chunk的产物")])]),s._v(" "),a("h3",{attrs:{id:"分包策略的基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分包策略的基本配置"}},[s._v("#")]),s._v(" 分包策略的基本配置")]),s._v(" "),a("p",[s._v("webpack提供了"),a("code",[s._v("optimization")]),s._v("配置项，用于配置一些优化信息")]),s._v(" "),a("p",[s._v("其中"),a("code",[s._v("splitChunks")]),s._v("是分包策略的配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("module.exports = {\n  optimization: {\n    splitChunks: {\n      // 分包策略\n    }\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("事实上，分包策略有其默认的配置，我们只需要轻微的改动，即可应对大部分分包场景")]),s._v(" "),a("ol",[a("li",[s._v("chunks")])]),s._v(" "),a("p",[s._v("该配置项用于配置需要应用分包策略的chunk")]),s._v(" "),a("p",[s._v("我们知道，分包是从已有的chunk中分离出新的chunk，那么哪些chunk需要分离呢")]),s._v(" "),a("p",[s._v("chunks有三个取值，分别是：")]),s._v(" "),a("ul",[a("li",[s._v("all: 对于所有的chunk都要应用分包策略")]),s._v(" "),a("li",[s._v("async：【默认】仅针对异步chunk应用分包策略")]),s._v(" "),a("li",[s._v("initial：仅针对普通chunk应用分包策略")])]),s._v(" "),a("p",[s._v("所以，你只需要配置"),a("code",[s._v("chunks")]),s._v("为"),a("code",[s._v("all")]),s._v("即可")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("maxSize")])]),s._v(" "),a("p",[s._v("该配置可以控制包的最大字节数")]),s._v(" "),a("p",[s._v("如果某个包（包括分出来的包）超过了该值，则webpack会尽可能的将其分离成多个包")]),s._v(" "),a("p",[s._v("但是不要忽略的是，分包的"),a("strong",[s._v("基础单位是模块")]),s._v("，如果一个完整的模块超过了该体积，它是无法做到再切割的，因此，尽管使用了这个配置，完全有可能某个包还是会超过这个体积")]),s._v(" "),a("p",[s._v("另外，该配置看上去很美妙，实际意义其实不大")]),s._v(" "),a("p",[s._v("因为分包的目的是"),a("strong",[s._v("提取大量的公共代码")]),s._v("，从而减少总体积和充分利用浏览器缓存")]),s._v(" "),a("p",[s._v("虽然该配置可以把一些包进行再切分，但是实际的总体积和传输量并没有发生变化")]),s._v(" "),a("blockquote",[a("p",[s._v("如果要进一步减少公共模块的体积，只能是压缩和"),a("code",[s._v("tree shaking")])])]),s._v(" "),a("h3",{attrs:{id:"分包策略的其他配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分包策略的其他配置"}},[s._v("#")]),s._v(" 分包策略的其他配置")]),s._v(" "),a("p",[s._v("如果不想使用其他配置的默认值，可以手动进行配置：")]),s._v(" "),a("ul",[a("li",[s._v("automaticNameDelimiter：新chunk名称的分隔符，默认值~")]),s._v(" "),a("li",[s._v("minChunks：一个模块被多少个chunk使用时，才会进行分包，默认值1")]),s._v(" "),a("li",[s._v("minSize：当分包达到多少字节后才允许被真正的拆分，默认值30000")])]),s._v(" "),a("h3",{attrs:{id:"缓存组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缓存组"}},[s._v("#")]),s._v(" 缓存组")]),s._v(" "),a("p",[s._v("之前配置的分包策略是全局的")]),s._v(" "),a("p",[s._v("而实际上，分包策略是基于缓存组的")]),s._v(" "),a("p",[s._v("每个缓存组提供一套独有的策略，webpack按照缓存组的优先级依次处理每个缓存组，被缓存组处理过的分包不需要再次分包")]),s._v(" "),a("p",[s._v("默认情况下，webpack提供了两个缓存组：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("module.exports = {\n  optimization:{\n    splitChunks: {\n      //全局配置\n      cacheGroups: {\n        // 属性名是缓存组名称，会影响到分包的chunk名\n        // 属性值是缓存组的配置，缓存组继承所有的全局配置，也有自己特殊的配置\n        vendors: { \n          test: /[\\\\/]node_modules[\\\\/]/, // 当匹配到相应模块时，将这些模块进行单独打包\n          priority: -10 // 缓存组优先级，优先级越高，该策略越先进行处理，默认值为0\n        },\n        default: {\n          minChunks: 2,  // 覆盖全局配置，将最小chunk引用数改为2\n          priority: -20, // 优先级\n          reuseExistingChunk: true // 重用已经被分离出去的chunk\n        }\n      }\n    }\n  }\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("p",[s._v("很多时候，缓存组对于我们来说没什么意义，因为默认的缓存组就已经够用了")]),s._v(" "),a("p",[s._v("但是我们同样可以利用缓存组来完成一些事情，比如对公共样式的抽离")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('module.exports = {\n  optimization: {\n    splitChunks: {\n      chunks: "all",\n      cacheGroups: {\n        styles: {\n          test: /\\.css$/, // 匹配样式模块\n          minSize: 0, // 覆盖默认的最小尺寸，这里仅仅是作为测试\n          minChunks: 2 // 覆盖默认的最小chunk引用数\n        }\n      }\n    }\n  },\n  module: {\n    rules: [{ test: /\\.css$/, use: [MiniCssExtractPlugin.loader, "css-loader"] }]\n  },\n  plugins: [\n    new CleanWebpackPlugin(),\n    new HtmlWebpackPlugin({\n      template: "./public/index.html",\n      chunks: ["index"]\n    }),\n    new MiniCssExtractPlugin({\n      filename: "[name].[hash:5].css",\n      // chunkFilename是配置来自于分割chunk的文件名\n      chunkFilename: "common.[hash:5].css" \n    })\n  ]\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h3",{attrs:{id:"配合多页应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配合多页应用"}},[s._v("#")]),s._v(" 配合多页应用")]),s._v(" "),a("p",[s._v("虽然现在单页应用是主流，但免不了还是会遇到多页应用")]),s._v(" "),a("p",[s._v("由于在多页应用中需要为每个html页面指定需要的chunk，这就造成了问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('new HtmlWebpackPlugin({\n  template: "./public/index.html",\n  chunks: ["index~other", "vendors~index~other", "index"]\n})\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("我们必须手动的指定被分离出去的chunk名称，这不是一种好办法")]),s._v(" "),a("p",[s._v("幸好"),a("code",[s._v("html-webpack-plugin")]),s._v("的新版本中解决了这一问题")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" html-webpack-plugin@next\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("做出以下配置即可：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('new HtmlWebpackPlugin({\n  template: "./public/index.html",\n  chunks: ["index"]\n})\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("它会自动的找到被"),a("code",[s._v("index")]),s._v("分离出去的chunk，并完成引用")]),s._v(" "),a("h3",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),a("p",[s._v("自动分包的原理其实并不复杂，主要经过以下步骤：")]),s._v(" "),a("ol",[a("li",[s._v("检查每个chunk编译的结果")]),s._v(" "),a("li",[s._v("根据分包策略，找到那些满足策略的模块")]),s._v(" "),a("li",[s._v("根据分包策略，生成新的chunk打包这些模块（代码有所变化）")]),s._v(" "),a("li",[s._v("把打包出去的模块从原始包中移除，并修正原始包代码")])]),s._v(" "),a("p",[s._v("在代码层面，有以下变动")]),s._v(" "),a("ol",[a("li",[s._v("分包的代码中，加入一个全局变量，类型为数组，其中包含公共模块的代码")]),s._v(" "),a("li",[s._v("原始包的代码中，使用数组中的公共代码")])]),s._v(" "),a("h2",{attrs:{id:"代码压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码压缩"}},[s._v("#")]),s._v(" 代码压缩")]),s._v(" "),a("h3",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("为什么要进行代码压缩")])])]),s._v(" "),a("p",[s._v("减少代码体积；破坏代码的可读性，提升破解成本；")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[s._v("什么时候要进行代码压缩")])])]),s._v(" "),a("p",[s._v("生产环境")]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("strong",[s._v("使用什么压缩工具")])])]),s._v(" "),a("p",[s._v("目前最流行的代码压缩工具主要有两个："),a("code",[s._v("UglifyJs")]),s._v("和"),a("code",[s._v("Terser")])]),s._v(" "),a("p",[a("code",[s._v("UglifyJs")]),s._v("是一个传统的代码压缩工具，已存在多年，曾经是前端应用的必备工具，但由于它不支持"),a("code",[s._v("ES6")]),s._v("语法，所以目前的流行度已有所下降。")]),s._v(" "),a("p",[a("code",[s._v("Terser")]),s._v("是一个新起的代码压缩工具，支持"),a("code",[s._v("ES6+")]),s._v("语法，因此被很多构建工具内置使用。"),a("code",[s._v("webpack")]),s._v("安装后会内置"),a("code",[s._v("Terser")]),s._v("，当启用生产环境后即可用其进行代码压缩。")]),s._v(" "),a("p",[s._v("因此，我们选择"),a("code",[s._v("Terser")])]),s._v(" "),a("h4",{attrs:{id:"关于副作用-side-effect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于副作用-side-effect"}},[s._v("#")]),s._v(" 关于副作用 side effect")]),s._v(" "),a("p",[s._v("副作用：函数运行过程中，可能会对外部环境造成影响的功能")]),s._v(" "),a("p",[s._v("如果函数中包含以下代码，该函数叫做副作用函数:")]),s._v(" "),a("ul",[a("li",[s._v("异步代码")]),s._v(" "),a("li",[s._v("localStorage")]),s._v(" "),a("li",[s._v("对外部数据的修改")])]),s._v(" "),a("p",[s._v("如果一个函数没有副作用，同时，函数的返回结果仅依赖参数，则该函数叫做纯函数(pure function)")]),s._v(" "),a("h3",{attrs:{id:"terser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terser"}},[s._v("#")]),s._v(" Terser")]),s._v(" "),a("p",[s._v("在"),a("code",[s._v("Terser")]),s._v("的官网可尝试它的压缩效果")]),s._v(" "),a("blockquote",[a("p",[s._v("Terser官网：https://terser.org/")])]),s._v(" "),a("p",[s._v("webpack自动集成了Terser")]),s._v(" "),a("p",[s._v("如果你想更改、添加压缩工具，又或者是想对Terser进行配置，使用下面的webpack配置即可")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const TerserPlugin = require('terser-webpack-plugin');\nconst OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin');\nmodule.exports = {\n  optimization: {\n    // 是否要启用压缩，默认情况下，生产环境会自动开启\n    minimize: true, \n    minimizer: [ // 压缩时使用的插件，可以有多个\n      new TerserPlugin(), \n      new OptimizeCSSAssetsPlugin()\n    ],\n  },\n};\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);