<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack的css工程化 | 汪元会的小窝</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="我的个人博客网站">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.eb5f38e4.css" as="style"><link rel="preload" href="/assets/js/app.30be4d10.js" as="script"><link rel="preload" href="/assets/js/3.94024a8a.js" as="script"><link rel="preload" href="/assets/js/1.a0e15140.js" as="script"><link rel="preload" href="/assets/js/8.71d740f3.js" as="script"><link rel="prefetch" href="/assets/js/10.44422b12.js"><link rel="prefetch" href="/assets/js/11.e2884594.js"><link rel="prefetch" href="/assets/js/12.ed62b8c4.js"><link rel="prefetch" href="/assets/js/13.04fc7dbe.js"><link rel="prefetch" href="/assets/js/14.b33fc362.js"><link rel="prefetch" href="/assets/js/15.8086a007.js"><link rel="prefetch" href="/assets/js/16.d6c662e6.js"><link rel="prefetch" href="/assets/js/17.5f625afc.js"><link rel="prefetch" href="/assets/js/18.f9fd87ec.js"><link rel="prefetch" href="/assets/js/19.704efcd0.js"><link rel="prefetch" href="/assets/js/20.3d8be1b0.js"><link rel="prefetch" href="/assets/js/21.c6b4a5f0.js"><link rel="prefetch" href="/assets/js/22.5c6bdc9d.js"><link rel="prefetch" href="/assets/js/23.3d67389b.js"><link rel="prefetch" href="/assets/js/24.8a325fd7.js"><link rel="prefetch" href="/assets/js/25.b1db8f83.js"><link rel="prefetch" href="/assets/js/26.a4aedf3e.js"><link rel="prefetch" href="/assets/js/27.eb8bd30e.js"><link rel="prefetch" href="/assets/js/28.359b6459.js"><link rel="prefetch" href="/assets/js/29.5f34f4f0.js"><link rel="prefetch" href="/assets/js/30.2a1f9d11.js"><link rel="prefetch" href="/assets/js/31.bd4b87c4.js"><link rel="prefetch" href="/assets/js/32.c8d74828.js"><link rel="prefetch" href="/assets/js/33.ecb358aa.js"><link rel="prefetch" href="/assets/js/34.50f77641.js"><link rel="prefetch" href="/assets/js/35.43b12503.js"><link rel="prefetch" href="/assets/js/36.c6c38fc0.js"><link rel="prefetch" href="/assets/js/37.9aaeb849.js"><link rel="prefetch" href="/assets/js/38.5111d6b8.js"><link rel="prefetch" href="/assets/js/4.741c1ee8.js"><link rel="prefetch" href="/assets/js/5.82794736.js"><link rel="prefetch" href="/assets/js/6.d840df8d.js"><link rel="prefetch" href="/assets/js/7.845393a4.js"><link rel="prefetch" href="/assets/js/9.c1efa612.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eb5f38e4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>汪元会的小窝</h3> <p class="description" data-v-59e6cb88>我的个人博客网站</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>汪元会</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="汪元会的小窝" class="logo"> <span class="site-name">汪元会的小窝</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端学习/" class="nav-link"><i class="undefined"></i>
  前端学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/嗨喵沉淀/" class="nav-link"><i class="undefined"></i>
  嗨喵沉淀
</a></li><li class="dropdown-item"><!----> <a href="/categories/高数学习/" class="nav-link"><i class="undefined"></i>
  高数学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/随笔感悟/" class="nav-link"><i class="undefined"></i>
  随笔感悟
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/huige9999" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    汪元会
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>26</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>8</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端学习/" class="nav-link"><i class="undefined"></i>
  前端学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/嗨喵沉淀/" class="nav-link"><i class="undefined"></i>
  嗨喵沉淀
</a></li><li class="dropdown-item"><!----> <a href="/categories/高数学习/" class="nav-link"><i class="undefined"></i>
  高数学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/随笔感悟/" class="nav-link"><i class="undefined"></i>
  随笔感悟
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/huige9999" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>webpack的css工程化</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>汪元会</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">webpack的css工程化</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>汪元会</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>10/19/2024</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>webpack</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="css工程化概述"><a href="#css工程化概述" class="header-anchor">#</a> css工程化概述</h2> <h3 id="css的问题"><a href="#css的问题" class="header-anchor">#</a> css的问题</h3> <h4 id="类名冲突的问题"><a href="#类名冲突的问题" class="header-anchor">#</a> 类名冲突的问题</h4> <p>你写一个css类的时候，你是写全局的类呢，还是写多个层级选择后的类呢？</p> <p>你会发现，怎么都不好</p> <ul><li>过深的层级不利于编写、阅读、压缩、复用</li> <li>过浅的层级容易导致类名冲突</li></ul> <p>一旦样式多起来，这个问题就会变得越发严重，其实归根结底，就是类名冲突不好解决的问题</p> <h4 id="重复样式"><a href="#重复样式" class="header-anchor">#</a> 重复样式</h4> <p>这种问题就更普遍了，一些重复的样式值总是不断的出现在css代码中，维护起来极其困难</p> <p>比如，一个网站的颜色一般就那么几种：</p> <ul><li>primary</li> <li>info</li> <li>warn</li> <li>error</li> <li>success</li></ul> <p>如果有更多的颜色，都是从这些色调中自然变化得来，可以想象，这些颜色会到处充斥到诸如背景、文字、边框中，一旦要做颜色调整，是一个非常大的工程</p> <h4 id="css文件细分问题"><a href="#css文件细分问题" class="header-anchor">#</a> css文件细分问题</h4> <p>在大型项目中，css也需要更细的拆分，这样有利于css代码的维护。</p> <p>比如，有一个做轮播图的模块，它不仅需要依赖js功能，还需要依赖css样式，既然依赖的js功能仅关心轮播图，那css样式也应该仅关心轮播图，由此类推，不同的功能依赖不同的css样式、公共样式可以单独抽离，这样就形成了不同于过去的css文件结构：文件更多、拆分的更细</p> <p>而同时，在真实的运行环境下，我们却希望文件越少越好，这种情况和JS遇到的情况是一致的</p> <p>因此，对于css，也需要工程化管理</p> <p>从另一个角度来说，css的工程化会遇到更多的挑战，因为css不像JS，它的语法本身经过这么多年并没有发生多少的变化（css3也仅仅是多了一些属性而已），对于css语法本身的改变也是一个工程化的课题</p> <h3 id="如何解决css问题"><a href="#如何解决css问题" class="header-anchor">#</a> 如何解决css问题</h3> <h4 id="解决类名冲突"><a href="#解决类名冲突" class="header-anchor">#</a> 解决类名冲突</h4> <p>一些第三方机构提出了一些方案来解决该问题，常见的解决方案如下：</p> <p><strong>命名约定</strong></p> <p>即提供一种命名的标准，来解决冲突，常见的标准有：</p> <ul><li>BEM</li> <li>OOCSS</li> <li>AMCSS</li> <li>SMACSS</li> <li>其他</li></ul> <p><strong>css in js</strong></p> <p>这种方案非常大胆，它觉得，css语言本身几乎无可救药了，干脆直接用js对象来表示样式，然后把样式直接应用到元素的style中</p> <p>这样一来，css变成了一个一个的对象，就可以完全利用到js语言的优势，你可以：</p> <ul><li>通过一个函数返回一个样式对象</li> <li>把公共的样式提取到公共模块中返回</li> <li>应用js的各种特性操作对象，比如：混合、提取、拆分</li> <li>更多的花样</li></ul> <blockquote><p>这种方案在手机端的React Native中大行其道</p></blockquote> <p><strong>css module</strong></p> <p>非常有趣和好用的css模块化方案，编写简单，绝对不重名</p> <h4 id="解决重复样式的问题"><a href="#解决重复样式的问题" class="header-anchor">#</a> 解决重复样式的问题</h4> <p><strong>css in js</strong></p> <p>这种方案虽然可以利用js语言解决重复样式值的问题，但由于太过激进，很多习惯写css的开发者编写起来并不是很适应</p> <p><strong>预编译器</strong></p> <p>有些第三方搞出一套css语言的进化版来解决这个问题，它支持变量、函数等高级语法，然后经过编译器将其编译成为正常的css</p> <p>这种方案特别像构建工具，不过它仅针对css</p> <p>常见的预编译器支持的语言有：</p> <ul><li>less</li> <li>sass</li></ul> <h4 id="解决css文件细分问题"><a href="#解决css文件细分问题" class="header-anchor">#</a> 解决css文件细分问题</h4> <p>这一部分，就要依靠构建工具，例如webpack来解决了</p> <p>利用一些loader或plugin来打包、合并、压缩css文件</p> <h2 id="利用webpack拆分css"><a href="#利用webpack拆分css" class="header-anchor">#</a> 利用webpack拆分css</h2> <p>要拆分css，就必须把css当成像js那样的模块；要把css当成模块，就必须有一个构建工具（webpack），它具备合并代码的能力</p> <p>而webpack本身只能读取css文件的内容、将其当作JS代码进行分析，因此，会导致错误</p> <p>于是，就必须有一个loader，能够将css代码转换为js代码</p> <h3 id="css-loader"><a href="#css-loader" class="header-anchor">#</a> css-loader</h3> <p>css-loader的作用，就是将css代码转换为js代码</p> <p>它的处理原理极其简单：将css代码作为字符串导出</p> <p>例如：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.red</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span><span class="token string">&quot;#f40&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>经过css-loader转换后变成js代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.red{
    color:&quot;#f40&quot;;
}</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>再例如：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.red</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span><span class="token string">&quot;#f40&quot;</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;./bg.png&quot;</span><span class="token punctuation">)</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>经过css-loader转换后变成js代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> import1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./bg.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.red{
    color:&quot;#f40&quot;;
    background:url(&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>import1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;)
}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这样一来，经过webpack的后续处理，会把依赖<code>./bg.png</code>添加到模块列表，然后再将代码转换为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> import1 <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token string">&quot;./src/bg.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.red{
    color:&quot;#f40&quot;;
    background:url(&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>import1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;)
}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>再例如：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;./reset.css&quot;</span><span class="token punctuation">;</span></span>
<span class="token selector">.red</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span><span class="token string">&quot;#f40&quot;</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span><span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">&quot;./bg.png&quot;</span><span class="token punctuation">)</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>会转换为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> import1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./reset.css&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> import2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./bg.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>import1<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
.red{
    color:&quot;#f40&quot;;
    background:url(&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>import2<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;)
}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>总结，css-loader干了什么：</p> <ol><li>将css文件的内容作为字符串导出</li> <li>将css中的其他依赖作为require导入，以便webpack分析依赖</li></ol> <h3 id="style-loader"><a href="#style-loader" class="header-anchor">#</a> style-loader</h3> <p>由于css-loader仅提供了将css转换为字符串导出的能力，剩余的事情要交给其他loader或plugin来处理</p> <p>style-loader可以将css-loader转换后的代码进一步处理，将css-loader导出的字符串加入到页面的style元素中</p> <p>例如：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.red</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span><span class="token string">&quot;#f40&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>经过css-loader转换后变成js代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.red{
    color:&quot;#f40&quot;;
}</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>经过style-loader转换后变成：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.red{
    color:&quot;#f40&quot;;
}</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">var</span> style <span class="token operator">=</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token keyword">var</span> styleElem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
styleElem<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> style<span class="token punctuation">;</span>
document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>styleElem<span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>以上代码均为简化后的代码，并不代表真实的代码
style-loader有能力避免同一个样式的重复导入</p></blockquote> <h2 id="bem"><a href="#bem" class="header-anchor">#</a> BEM</h2> <p>BEM是一套针对css类样式的命名方法。</p> <p>BEM全称是：<strong>B</strong>lock <strong>E</strong>lement <strong>M</strong>odifier</p> <p>一个完整的BEM类名：block__element_modifier，例如：<code>banner__dot_selected</code>，可以表示：轮播图中，处于选中状态的小圆点</p> <p>三个部分的具体含义为：</p> <ul><li><strong>Block</strong>：页面中的大区域，表示最顶级的划分，例如：轮播图(<code>banner</code>)、布局(<code>layout</code>)、文章(<code>article</code>)等等</li> <li><strong>element</strong>：区域中的组成部分，例如：轮播图中的横幅图片(<code>banner__img</code>)、轮播图中的容器（<code>banner__container</code>）、布局中的头部(<code>layout__header</code>)、文章中的标题(<code>article_title</code>)</li> <li><strong>modifier</strong>：可选。通常表示状态，例如：处于展开状态的布局左边栏（<code>layout__left_expand</code>）、处于选中状态的轮播图小圆点(<code>banner__dot_selected</code>)</li></ul> <p>在某些大型工程中，如果使用BEM命名法，还可能会增加一个前缀，来表示类名的用途，常见的前缀有：</p> <ul><li><strong>l</strong>: layout，表示这个样式是用于布局的</li> <li><strong>c</strong>: component，表示这个样式是一个组件，即一个功能区域</li> <li><strong>u</strong>: util，表示这个样式是一个通用的、工具性质的样式</li> <li><strong>j</strong>: javascript，表示这个样式没有实际意义，是专门提供给js获取元素使用的</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>.c-footer__link
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="css-in-js"><a href="#css-in-js" class="header-anchor">#</a> css in js</h2> <p>css in js 的核心思想是：用一个JS对象来描述样式，而不是css样式表</p> <p>例如下面的对象就是一个用于描述样式的对象：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">&quot;#f40&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token string">&quot;400px&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">&quot;500px&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token string">&quot;0 auto&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>由于这种描述样式的方式<strong>根本就不存在类名</strong>，自然不会有类名冲突</p> <p>至于如何把样式应用到界面上，不是它所关心的事情，你可以用任何技术、任何框架、任何方式将它应用到界面。</p> <blockquote><p>后续学习的vue、react都支持css in js，可以非常轻松的应用到界面</p></blockquote> <p>css in js的特点：</p> <ul><li><strong>绝无冲突的可能</strong>：由于它根本不存在类名，所以绝不可能出现类名冲突</li> <li><strong>更加灵活</strong>：可以充分利用JS语言灵活的特点，用各种招式来处理样式</li> <li><strong>应用面更广</strong>：只要支持js语言，就可以支持css in js，因此，在一些用JS语言开发移动端应用的时候非常好用，因为移动端应用很有可能并不支持css</li> <li><strong>书写不便</strong>：书写样式，特别是公共样式的时候，处理起来不是很方便</li> <li><strong>在页面中增加了大量冗余内容</strong>：在页面中处理css in js时，往往是将样式加入到元素的style属性中，会大量增加元素的内联样式，并且可能会有大量重复，不易阅读最终的页面代码</li></ul> <h2 id="css-module"><a href="#css-module" class="header-anchor">#</a> css module</h2> <h3 id="思路"><a href="#思路" class="header-anchor">#</a> 思路</h3> <p>css module 遵循以下思路解决类名冲突问题：</p> <ol><li>css的类名冲突往往发生在大型项目中</li> <li>大型项目往往会使用构建工具（webpack等）搭建工程</li> <li>构建工具允许将css样式切分为更加精细的模块</li> <li>同JS的变量一样，每个css模块文件中难以出现冲突的类名，冲突的类名往往发生在不同的css模块文件中</li> <li>只需要保证构建工具在合并样式代码后不会出现类名冲突即可
<img src="/assets/img/32.b370af71.png" alt="alt text"></li></ol> <h3 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h3> <p>在webpack中，作为处理css的css-loader，它实现了css module的思想，要启用css module，需要将css-loader的配置<code>modules</code>设置为<code>true</code>。</p> <p>css-loader的实现方式如下：
<img src="/assets/img/31.8c30a20a.png" alt="alt text"></p> <p>原理极其简单，开启了css module后，css-loader会将样式中的类名进行转换，转换为一个唯一的hash值。</p> <p>由于hash值是根据模块路径和类名生成的，因此，不同的css模块，哪怕具有相同的类名，转换后的hash值也不一样。</p> <p><img src="/assets/img/33.db5acf6f.png" alt="alt text"></p> <h3 id="如何应用样式"><a href="#如何应用样式" class="header-anchor">#</a> 如何应用样式</h3> <p>css module带来了一个新的问题：源代码的类名和最终生成的类名是不一样的，而开发者只知道自己写的源代码中的类名，并不知道最终的类名是什么，那如何应用类名到元素上呢？</p> <p>为了解决这个问题，css-loader会导出原类名和最终类名的对应关系，该关系是通过一个对象描述的</p> <p><img src="/assets/img/34.0d8b6689.png" alt="alt text"></p> <p>这样一来，我们就可以在js代码中获取到css模块导出的结果，从而应用类名了</p> <p>style-loader为了我们更加方便的应用类名，会去除掉其他信息，仅暴露对应关系</p> <h3 id="其他操作"><a href="#其他操作" class="header-anchor">#</a> 其他操作</h3> <h4 id="全局类名"><a href="#全局类名" class="header-anchor">#</a> 全局类名</h4> <p>某些类名是全局的、静态的，不需要进行转换，仅需要在类名位置使用一个特殊的语法即可：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:global(.main)</span><span class="token punctuation">{</span>
    ...
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用了global的类名不会进行转换，相反的，没有使用global的类名，表示默认使用了local</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:local(.main)</span><span class="token punctuation">{</span>
    ...
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用了local的类名表示局部类名，是可能会造成冲突的类名，会被css module进行转换</p> <h4 id="如何控制最终类名"><a href="#如何控制最终类名" class="header-anchor">#</a> 如何控制最终类名</h4> <p>绝大部分情况下，我们都不需要控制最终的类名，因为控制它没有任何意义</p> <p>如果一定要控制最终的类名，需要配置css-loader的<code>localIdentName</code></p> <h4 id="其他注意事项"><a href="#其他注意事项" class="header-anchor">#</a> 其他注意事项</h4> <ul><li>css module往往配合构建工具使用</li> <li>css module仅处理顶级类名，尽量不要书写嵌套的类名，也没有这个必要</li> <li>css module仅处理类名，不处理其他选择器</li> <li>css module还会处理id选择器，不过任何时候都没有使用id选择器的理由</li> <li>使用了css module后，只要能做到让类名望文知意即可，不需要遵守其他任何的命名规范</li></ul> <h2 id="css预编译器"><a href="#css预编译器" class="header-anchor">#</a> CSS预编译器</h2> <h3 id="基本原理"><a href="#基本原理" class="header-anchor">#</a> 基本原理</h3> <p>编写css时，受限于css语言本身，常常难以处理一些问题：</p> <ul><li>重复的样式值：例如常用颜色、常用尺寸</li> <li>重复的代码段：例如绝对定位居中、清除浮动</li> <li>重复的嵌套书写</li></ul> <p>由于官方迟迟不对css语言本身做出改进，一些第三方机构开始想办法来解决这些问题</p> <p>其中一种方案，便是预编译器</p> <p>预编译器的原理很简单，即使用一种更加优雅的方式来书写样式代码，通过一个编译器，将其转换为可被浏览器识别的传统css代码</p> <p><img src="/assets/img/35.43599cc6.png" alt="alt text"></p> <p>预编译器有less和sass等</p> <p><img src="/assets/img/36.e5a28942.png" alt="alt text"></p> <h3 id="less的安装和使用"><a href="#less的安装和使用" class="header-anchor">#</a> less的安装和使用</h3> <p>从原理可知，要使用LESS，必须要安装LESS编译器</p> <p>LESS编译器是基于node开发的，可以通过npm下载安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> <span class="token function">less</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装好了less之后，它提供了一个CLI工具<code>lessc</code>，通过该工具即可完成编译</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>lessc less代码文件 编译后的文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>试一试:</p> <p>新建一个<code>index.less</code>文件，编写内容如下：</p> <div class="language-less line-numbers-mode"><pre class="language-less"><code><span class="token comment">// less代码</span>
<span class="token variable">@red<span class="token punctuation">:</span></span> #f40<span class="token punctuation">;</span>

<span class="token selector">.redcolor</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@red</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>运行命令：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>lessc index.less index.css
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>可以看到编译之后的代码：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.redcolor</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f40<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="less常用语法"><a href="#less常用语法" class="header-anchor">#</a> less常用语法</h3> <ul><li>变量</li> <li>混合</li> <li>嵌套</li> <li>运算</li> <li>函数</li> <li>作用域</li> <li>注释</li> <li>导入</li></ul> <h3 id="webpack中使用less"><a href="#webpack中使用less" class="header-anchor">#</a> webpack中使用less</h3> <p>安装less-loader</p> <p>先用less-loader将less转换成css,再交给css-loader、style-loader处理</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>   module: {
        rules: [
            { test: /\.less$/, use: [&quot;style-loader&quot;, &quot;css-loader?modules&quot;, &quot;less-loader&quot;] },
        ]
    },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>注: less不能解决类名冲突的问题，所以在css-loader中要开启css module</p></blockquote> <h2 id="postcss"><a href="#postcss" class="header-anchor">#</a> PostCss</h2> <h3 id="什么是postcss"><a href="#什么是postcss" class="header-anchor">#</a> 什么是PostCss</h3> <p>CSS工程化面临着诸多问题，而解决这些问题的方案多种多样。</p> <p>如果把CSS单独拎出来看，光是样式本身，就有很多事情要处理。</p> <p>既然有这么多事情要处理，何不把这些事情集中到一起统一处理呢？</p> <p>PostCss就是基于这样的理念出现的。</p> <p>PostCss类似于一个编译器，可以将样式源码编译成最终的CSS代码
<img src="/assets/img/38.9a6244fd.png" alt="alt text"></p> <p>看上去是不是和LESS、SASS一样呢？</p> <p>但PostCss和LESS、SASS的思路不同，它其实只做一些代码分析之类的事情，将分析的结果交给插件，具体的代码转换操作是插件去完成的。</p> <p><img src="/assets/img/37.74b0f67a.png" alt="alt text"></p> <p>官方的一张图更能说明postcss的处理流程：
<img src="/assets/img/39.0509dd96.png" alt="alt text"></p> <blockquote><p>这一点有点像webpack，webpack本身仅做依赖分析、抽象语法树分析，其他的操作是靠插件和加载器完成的。</p></blockquote> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <p>PostCss是基于node编写的，因此可以使用npm安装</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> postcss
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>postcss库提供了对应的js api用于转换代码，如果你想使用postcss的一些高级功能，或者想开发postcss插件，就要api使用postcss，api的文档地址是：http://api.postcss.org/</p> <p>不过绝大部分时候，我们都是使用者，并不希望使用代码的方式来使用PostCss</p> <p>因此，我们可以再安装一个postcss-cli，通过命令行来完成编译</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> postcss-cli
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>postcss-cli提供一个命令，它调用postcss中的api来完成编译</p> <p>命令的使用方式为：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>postcss 源码文件 <span class="token parameter variable">-o</span> 输出文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h3> <p>和webpack类似，postcss有自己的配置文件，该配置文件会影响postcss的某些编译行为。</p> <p>配置文件的默认名称是：<code>postcss.config.js</code></p> <p>例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">map</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//关闭source-map</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="插件"><a href="#插件" class="header-anchor">#</a> 插件</h3> <p>光使用postcss是没有多少意义的，要让它真正的发挥作用，需要插件</p> <p>postcss的插件市场：https://www.postcss.parts/</p> <p>下面罗列一些postcss的常用插件</p> <h4 id="postcss-preset-env"><a href="#postcss-preset-env" class="header-anchor">#</a> postcss-preset-env</h4> <p>过去使用postcss的时候，往往会使用大量的插件，它们各自解决一些问题</p> <p>这样导致的结果是安装插件、配置插件都特别的繁琐</p> <p>于是出现了这么一个插件<code>postcss-preset-env</code>，它称之为<code>postcss预设环境</code>，大意就是它整合了很多的常用插件到一起，并帮你完成了基本的配置，你只需要安装它一个插件，就相当于安装了很多插件了。</p> <p>安装好该插件后，在postcss配置中加入下面的配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;postcss-preset-env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// {} 中可以填写插件的配置</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>该插件的功能很多，下面一一介绍</p> <p><strong>1. 自动的厂商前缀</strong>
某些新的css样式需要在旧版本浏览器中使用厂商前缀方可实现</p> <p>例如</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">::placeholder</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>该功能在不同的旧版本浏览器中需要书写为</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">::-webkit-input-placeholder</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">::-moz-placeholder</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">:-ms-input-placeholder</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">::-ms-input-placeholder</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">::placeholder</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>要完成这件事情，需要使用<code>autoprefixer</code>库。</p> <p>而<code>postcss-preset-env</code>内部包含了该库，自动有了该功能。</p> <p>如果需要调整<strong>兼容的浏览器</strong>范围，可以通过下面的方式进行配置</p> <p><strong>方式1：在postcss-preset-env的配置中加入browsers</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;postcss-preset-env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">browsers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;last 2 version&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;&gt; 1%&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>方式2【推荐】：添加 .browserslistrc 文件</strong></p> <p>创建文件<code>.browserslistrc</code>，填写配置内容</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>last 2 version
&gt; 1%
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>方式3【推荐】：在package.json的配置中加入browserslist</strong></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;browserslist&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;last 2 version&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;&gt; 1%&quot;</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>browserslist</code>是一个多行的（数组形式的）标准字符串。</p> <p>它的书写规范多而繁琐，详情见：https://github.com/browserslist/browserslist</p> <p>一般情况下，大部分网站都使用下面的格式进行书写</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>last 2 version
&gt; 1% in CN
not ie &lt;= 8
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><code>last 2 version</code>: 浏览器的兼容最近期的两个版本</li> <li><code>&gt; 1% in CN</code>: 匹配中国大于1%的人使用的浏览器， <code>in CN</code>可省略</li> <li><code>not ie &lt;= 8</code>: 排除掉版本号小于等于8的IE浏览器</li></ul> <blockquote><p>默认情况下，匹配的结果求的是并集</p></blockquote> <p>你可以通过网站：https://browserl.ist/ 对配置结果覆盖的浏览器进行查询，查询时，多行之间使用英文逗号分割</p> <blockquote><p>browserlist的数据来自于<a href="http://caniuse.com/" target="_blank" rel="noopener noreferrer">CanIUse<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>网站，由于数据并非实时的，所以不会特别准确</p></blockquote> <p><strong>2. 未来的CSS语法</strong></p> <p>CSS的某些前沿语法正在制定过程中，没有形成真正的标准，如果希望使用这部分语法，为了浏览器兼容性，需要进行编译</p> <p>过去，完成该语法编译的是<code>cssnext</code>库，不过有了<code>postcss-preset-env</code>后，它自动包含了该功能。</p> <p>你可以通过<code>postcss-preset-env</code>的<code>stage</code>配置，告知<code>postcss-preset-env</code>需要对哪个阶段的css语法进行兼容处理，它的默认值为2</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;postcss-preset-env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">stage</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>一共有5个阶段可配置：</p> <ul><li>Stage 0: Aspirational - 只是一个早期草案，极其不稳定</li> <li>Stage 1: Experimental - 仍然极其不稳定，但是提议已被W3C公认</li> <li>Stage 2: Allowable - 虽然还是不稳定，但已经可以使用了</li> <li>Stage 3: Embraced - 比较稳定，可能将来会发生一些小的变化，它即将成为最终的标准</li> <li>Stage 4: Standardized - 所有主流浏览器都应该支持的W3C标准</li></ul> <p>了解了以上知识后，接下来了解一下未来的css语法，尽管某些语法仍处于非常早期的阶段，但是有该插件存在，编译后仍然可以被浏览器识别</p> <p><strong>3. 变量</strong></p> <p>未来的css语法是天然支持变量的</p> <p>在<code>:root{}</code>中定义常用变量，使用<code>--</code>前缀命名变量</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">:root</span><span class="token punctuation">{</span>
    <span class="token property">--lightColor</span><span class="token punctuation">:</span> #ddd<span class="token punctuation">;</span>
    <span class="token property">--darkColor</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">a</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--lightColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--darkColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>编译后，仍然可以看到原语法，因为某些新语法的存在并不会影响浏览器的渲染，尽管浏览器可能不认识
如果不希望在结果中看到新语法，可以配置<code>postcss-preset-env</code>的<code>preserve</code>为<code>false</code></p></blockquote> <p><strong>4. 自定义选择器</strong></p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@custom-selector</span> <span class="token punctuation">:</span>--heading h1<span class="token punctuation">,</span> h2<span class="token punctuation">,</span> h3<span class="token punctuation">,</span> h4<span class="token punctuation">,</span> h5<span class="token punctuation">,</span> h6<span class="token punctuation">;</span></span>
<span class="token atrule"><span class="token rule">@custom-selector</span> <span class="token punctuation">:</span><span class="token property">--enter</span> <span class="token punctuation">:</span>focus<span class="token punctuation">,</span><span class="token punctuation">:</span>hover<span class="token punctuation">;</span></span>

<span class="token selector">a:--enter</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #f40<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">:--heading</span><span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">:--heading.active</span><span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>编译后</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">a:focus,a:hover</span><span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #f40<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">h1,h2,h3,h4,h5,h6</span><span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">h1.active,h2.active,h3.active,h4.active,h5.active,h6.active</span><span class="token punctuation">{</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>5. 嵌套</strong></p> <p>与LESS相同，只不过嵌套的选择器前必须使用符号<code>&amp;</code></p> <div class="language-less line-numbers-mode"><pre class="language-less"><code><span class="token selector">.a</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token selector">&amp; .b</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">&amp; &gt; .b</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>编译后</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.a</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> red
<span class="token punctuation">}</span>

<span class="token selector">.a .b</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.a&gt;.b</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.a:hover</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="postcss-apply"><a href="#postcss-apply" class="header-anchor">#</a> postcss-apply</h4> <p>该插件可以支持在css中书写属性集</p> <p>类似于LESS中的混入，可以利用CSS的新语法定义一个CSS代码片段，然后在需要的时候应用它</p> <div class="language-less line-numbers-mode"><pre class="language-less"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token selector">--center:</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span>50%<span class="token punctuation">,</span> <span class="token operator">-</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.item</span><span class="token punctuation">{</span>
    <span class="token variable">@apply</span> <span class="token operator">-</span><span class="token operator">-</span>center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>编译后</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.item</span><span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">-webkit-transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>实际上，该功能也属于cssnext，不知为何<code>postcss-preset-env</code>没有支持</p></blockquote> <h4 id="postcss-color-function"><a href="#postcss-color-function" class="header-anchor">#</a> postcss-color-function</h4> <p>该插件支持在源码中使用一些颜色函数</p> <div class="language-less line-numbers-mode"><pre class="language-less"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 使用颜色#aabbcc，不做任何处理，等同于直接书写 #aabbcc */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>#aabbcc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc透明度设置为90% */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>#aabbcc <span class="token function">a</span><span class="token punctuation">(</span>90%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc的红色部分设置为90% */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>#aabbcc <span class="token function">red</span><span class="token punctuation">(</span>90%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc调亮50%（更加趋近于白色），类似于less中的lighten函数 */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>#aabbcc <span class="token function">tint</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc调暗50%（更加趋近于黑色），类似于less中的darken函数 */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">color</span><span class="token punctuation">(</span>#aabbcc <span class="token function">shade</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>编译后</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 使用颜色#aabbcc，不做任何处理，等同于直接书写 #aabbcc */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>170<span class="token punctuation">,</span> 187<span class="token punctuation">,</span> 204<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc透明度设置为90% */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>170<span class="token punctuation">,</span> 187<span class="token punctuation">,</span> 204<span class="token punctuation">,</span> 0.9<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc的红色部分设置为90% */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>230<span class="token punctuation">,</span> 187<span class="token punctuation">,</span> 204<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc调亮50%（更加趋近于白色），类似于less中的lighten函数 */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>213<span class="token punctuation">,</span> 221<span class="token punctuation">,</span> 230<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 将颜色#aabbcc调暗50%（更加趋近于黑色），类似于less中的darken函数 */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>85<span class="token punctuation">,</span> 94<span class="token punctuation">,</span> 102<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="postcss-import"><a href="#postcss-import" class="header-anchor">#</a> postcss-import</h4> <p>该插件可以让你在<code>postcss</code>文件中导入其他样式代码，通过该插件可以将它们合并</p> <blockquote><p>由于后续的课程中，会将postcss加入到webpack中，而webpack本身具有依赖分析的功能，所以该插件的实际意义不大</p></blockquote> <h4 id="stylelint"><a href="#stylelint" class="header-anchor">#</a> stylelint</h4> <p>在实际的开发中，我们可能会错误的或不规范的书写一些css代码，stylelint插件会即时的发现错误</p> <p>由于不同的公司可能使用不同的CSS书写规范，stylelint为了保持灵活，它本身并没有提供具体的规则验证</p> <p>你需要安装或自行编写规则验证方案</p> <p>通常，我们会安装<code>stylelint-config-standard</code>库来提供标准的CSS规则判定</p> <p>安装好后，我们需要告诉stylelint使用该库来进行规则验证</p> <p>告知的方式有多种，比较常见的是使用文件<code>.stylelintrc</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">//.styleintrc</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stylelint-config-standard&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>此时，如果你的代码出现不规范的地方，编译时将会报出错误</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #f4<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/assets/img/40.368b7e2c.png" alt="alt text"></p> <p>发生了两处错误：</p> <ol><li>缩进应该只有两个空格</li> <li>十六进制的颜色值不正确</li></ol> <p>如果某些规则并非你所期望的，可以在配置中进行设置</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stylelint-config-standard&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;indentation&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>设置为<code>null</code>可以禁用该规则，或者设置为4，表示一个缩进有4个空格。具体的设置需要参见stylelint文档：https://stylelint.io/</p> <p>但是这种错误报告需要在编译时才会发生，如果我希望在编写代码时就自动在编辑器里报错呢？</p> <p>既然想在编辑器里达到该功能，那么就要在编辑器里做文章</p> <p>安装vscode的插件<code>stylelint</code>即可，它会读取你工程中的配置文件，按照配置进行实时报错</p> <blockquote><p>实际上，如果你拥有了<code>stylelint</code>插件，可以不需要在postcss中使用该插件了</p></blockquote> <h3 id="webpack中使用postcss"><a href="#webpack中使用postcss" class="header-anchor">#</a> webpack中使用postcss</h3> <p>安装postcss-loader，它的作用是调用postcss API，将postcss源代码转换成普通的css，然后再交给css-loader</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module: {
        rules: [
            {
                test: /\.pcss$/, use: [&quot;style-loader&quot;, &quot;css-loader?modules&quot;, &quot;postcss-loader&quot;]
            }
        ]
    },
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="抽离css文件"><a href="#抽离css文件" class="header-anchor">#</a> 抽离css文件</h2> <p>目前，css代码被css-loader转换后，交给的是style-loader进行处理。</p> <p>style-loader使用的方式是用一段js代码，将样式加入到style元素中。</p> <p>而实际的开发中，我们往往希望依赖的样式最终形成一个css文件</p> <p>此时，就需要用到一个库：mini-css-extract-plugin</p> <p>该库提供了1个plugin和1个loader</p> <ul><li>plugin: 负责生成css文件</li> <li>loader：负责记录要生成的css文件的内容，同时导出开启css-module后的样式对象</li></ul> <h3 id="使用方式"><a href="#使用方式" class="header-anchor">#</a> 使用方式</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;)
module.exports = {
    module: {
        rules: [
            {
                test: /\.css$/, use: [MiniCssExtractPlugin.loader, &quot;css-loader?modules&quot;]
            }
        ]
    },
    plugins: [
        new MiniCssExtractPlugin() //负责生成css文件
    ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="配置生成文件名"><a href="#配置生成文件名" class="header-anchor">#</a> 配置生成文件名</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>同output.filename的含义一样，即根据chunk生成的样式文件名

配置生成的文件名，例如[name].[contenthash:5].css

默认情况下，每个chunk对应一个css文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">10/21/2024, 10:22:31 AM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#css工程化概述" class="sidebar-link reco-side-css工程化概述" data-v-b57cc07c>css工程化概述</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#css的问题" class="sidebar-link reco-side-css的问题" data-v-b57cc07c>css的问题</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#如何解决css问题" class="sidebar-link reco-side-如何解决css问题" data-v-b57cc07c>如何解决css问题</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#利用webpack拆分css" class="sidebar-link reco-side-利用webpack拆分css" data-v-b57cc07c>利用webpack拆分css</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#css-loader" class="sidebar-link reco-side-css-loader" data-v-b57cc07c>css-loader</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#style-loader" class="sidebar-link reco-side-style-loader" data-v-b57cc07c>style-loader</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#bem" class="sidebar-link reco-side-bem" data-v-b57cc07c>BEM</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#css-in-js" class="sidebar-link reco-side-css-in-js" data-v-b57cc07c>css in js</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#css-module" class="sidebar-link reco-side-css-module" data-v-b57cc07c>css module</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#思路" class="sidebar-link reco-side-思路" data-v-b57cc07c>思路</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#实现原理" class="sidebar-link reco-side-实现原理" data-v-b57cc07c>实现原理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#如何应用样式" class="sidebar-link reco-side-如何应用样式" data-v-b57cc07c>如何应用样式</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#其他操作" class="sidebar-link reco-side-其他操作" data-v-b57cc07c>其他操作</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#css预编译器" class="sidebar-link reco-side-css预编译器" data-v-b57cc07c>CSS预编译器</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#基本原理" class="sidebar-link reco-side-基本原理" data-v-b57cc07c>基本原理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#less的安装和使用" class="sidebar-link reco-side-less的安装和使用" data-v-b57cc07c>less的安装和使用</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#less常用语法" class="sidebar-link reco-side-less常用语法" data-v-b57cc07c>less常用语法</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#webpack中使用less" class="sidebar-link reco-side-webpack中使用less" data-v-b57cc07c>webpack中使用less</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#postcss" class="sidebar-link reco-side-postcss" data-v-b57cc07c>PostCss</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#什么是postcss" class="sidebar-link reco-side-什么是postcss" data-v-b57cc07c>什么是PostCss</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#安装" class="sidebar-link reco-side-安装" data-v-b57cc07c>安装</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#配置文件" class="sidebar-link reco-side-配置文件" data-v-b57cc07c>配置文件</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#插件" class="sidebar-link reco-side-插件" data-v-b57cc07c>插件</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#webpack中使用postcss" class="sidebar-link reco-side-webpack中使用postcss" data-v-b57cc07c>webpack中使用postcss</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#抽离css文件" class="sidebar-link reco-side-抽离css文件" data-v-b57cc07c>抽离css文件</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#使用方式" class="sidebar-link reco-side-使用方式" data-v-b57cc07c>使用方式</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack3.html#配置生成文件名" class="sidebar-link reco-side-配置生成文件名" data-v-b57cc07c>配置生成文件名</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.30be4d10.js" defer></script><script src="/assets/js/3.94024a8a.js" defer></script><script src="/assets/js/1.a0e15140.js" defer></script><script src="/assets/js/8.71d740f3.js" defer></script>
  </body>
</html>
