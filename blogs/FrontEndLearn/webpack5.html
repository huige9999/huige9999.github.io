<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack的性能优化 | 汪元会的小窝</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="我的个人博客网站">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.d79924ae.css" as="style"><link rel="preload" href="/assets/js/app.345559c1.js" as="script"><link rel="preload" href="/assets/js/3.356cc003.js" as="script"><link rel="preload" href="/assets/js/1.02f963b0.js" as="script"><link rel="preload" href="/assets/js/9.d7966b29.js" as="script"><link rel="prefetch" href="/assets/js/10.353da645.js"><link rel="prefetch" href="/assets/js/11.980aa869.js"><link rel="prefetch" href="/assets/js/12.585074e7.js"><link rel="prefetch" href="/assets/js/13.11792b33.js"><link rel="prefetch" href="/assets/js/14.79ad89bf.js"><link rel="prefetch" href="/assets/js/15.c7eb6fbd.js"><link rel="prefetch" href="/assets/js/16.ca3e491a.js"><link rel="prefetch" href="/assets/js/17.e1ee0f5d.js"><link rel="prefetch" href="/assets/js/18.9dde8687.js"><link rel="prefetch" href="/assets/js/19.e3502dd1.js"><link rel="prefetch" href="/assets/js/20.6ccbecf5.js"><link rel="prefetch" href="/assets/js/21.ec305aff.js"><link rel="prefetch" href="/assets/js/22.95f6f05c.js"><link rel="prefetch" href="/assets/js/23.b232d619.js"><link rel="prefetch" href="/assets/js/24.68245e70.js"><link rel="prefetch" href="/assets/js/25.42a871ba.js"><link rel="prefetch" href="/assets/js/26.4f79e862.js"><link rel="prefetch" href="/assets/js/27.85f57131.js"><link rel="prefetch" href="/assets/js/28.5ba48dfe.js"><link rel="prefetch" href="/assets/js/29.6be95ff2.js"><link rel="prefetch" href="/assets/js/30.ef796350.js"><link rel="prefetch" href="/assets/js/31.896c24fe.js"><link rel="prefetch" href="/assets/js/32.cce5c4e3.js"><link rel="prefetch" href="/assets/js/33.acff462e.js"><link rel="prefetch" href="/assets/js/34.531058d1.js"><link rel="prefetch" href="/assets/js/35.40e07ea1.js"><link rel="prefetch" href="/assets/js/36.9393e03c.js"><link rel="prefetch" href="/assets/js/37.1ed30b1d.js"><link rel="prefetch" href="/assets/js/38.6b105728.js"><link rel="prefetch" href="/assets/js/39.4dc33980.js"><link rel="prefetch" href="/assets/js/4.f701b875.js"><link rel="prefetch" href="/assets/js/40.efa89601.js"><link rel="prefetch" href="/assets/js/41.9600fab2.js"><link rel="prefetch" href="/assets/js/42.1e589c11.js"><link rel="prefetch" href="/assets/js/43.6e946435.js"><link rel="prefetch" href="/assets/js/44.1e6b2bf9.js"><link rel="prefetch" href="/assets/js/45.2b21999f.js"><link rel="prefetch" href="/assets/js/46.6892af2d.js"><link rel="prefetch" href="/assets/js/5.d14630e7.js"><link rel="prefetch" href="/assets/js/6.fd7b7f3a.js"><link rel="prefetch" href="/assets/js/7.3afa3495.js"><link rel="prefetch" href="/assets/js/8.bbe75634.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d79924ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>汪元会的小窝</h3> <p class="description" data-v-59e6cb88>我的个人博客网站</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>汪元会</span>
          
        <!---->
        2024
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="汪元会的小窝" class="logo"> <span class="site-name">汪元会的小窝</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端学习/" class="nav-link"><i class="undefined"></i>
  前端学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/嗨喵沉淀/" class="nav-link"><i class="undefined"></i>
  嗨喵沉淀
</a></li><li class="dropdown-item"><!----> <a href="/categories/高数学习/" class="nav-link"><i class="undefined"></i>
  高数学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/随笔感悟/" class="nav-link"><i class="undefined"></i>
  随笔感悟
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/huige9999" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    汪元会
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>34</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>9</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/前端学习/" class="nav-link"><i class="undefined"></i>
  前端学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/嗨喵沉淀/" class="nav-link"><i class="undefined"></i>
  嗨喵沉淀
</a></li><li class="dropdown-item"><!----> <a href="/categories/高数学习/" class="nav-link"><i class="undefined"></i>
  高数学习
</a></li><li class="dropdown-item"><!----> <a href="/categories/随笔感悟/" class="nav-link"><i class="undefined"></i>
  随笔感悟
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/huige9999" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>webpack的性能优化</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>汪元会</span>
          
        <!---->
        2024
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">webpack的性能优化</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>汪元会</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>10/31/2024</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>webpack</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>性能优化包括三个方面：</p> <ul><li>构建性能</li> <li>传输性能</li> <li>运行性能</li></ul> <h3 id="构建性能"><a href="#构建性能" class="header-anchor">#</a> 构建性能</h3> <p>这里所说的构建性能，是指在<strong>开发阶段的构建性能</strong>，而不是生产环境的构建性能</p> <p>优化的目标，<strong>是降低从打包开始，到代码效果呈现所经过的时间</strong></p> <p>构建性能会影响开发效率。构建性能越高，开发过程中时间的浪费越少</p> <h3 id="传输性能"><a href="#传输性能" class="header-anchor">#</a> 传输性能</h3> <p>传输性能是指，打包后的JS代码传输到浏览器经过的时间</p> <p>在优化传输性能时要考虑到：</p> <ol><li>总传输量：所有需要传输的JS文件的内容加起来，就是总传输量，重复代码越少，总传输量越少</li> <li>文件数量：当访问页面时，需要传输的JS文件数量，文件数量越多，http请求越多，响应速度越慢</li> <li>浏览器缓存：JS文件会被浏览器缓存，被缓存的文件不会再进行传输</li></ol> <h3 id="运行性能"><a href="#运行性能" class="header-anchor">#</a> 运行性能</h3> <p>运行性能是指，JS代码在浏览器端的运行速度</p> <p>它主要取决于我们如何书写高性能的代码</p> <blockquote><p>注：永远不要过早的关注于性能，因为你在开发 的时候，无法完全预知最终的运行性能，过早的关注性能会极大的降低开发效率</p></blockquote> <p><strong>性能优化没有完美的解决方案，需要具体情况具体分析</strong></p> <h2 id="减少模块解析"><a href="#减少模块解析" class="header-anchor">#</a> 减少模块解析</h2> <h3 id="什么叫做模块解析"><a href="#什么叫做模块解析" class="header-anchor">#</a> 什么叫做模块解析？</h3> <p><img src="/assets/img/image.d4e566f8.png" alt="alt text">
模块解析包括：抽象语法树分析、依赖分析、模块语法替换</p> <h3 id="不做模块解析会怎样"><a href="#不做模块解析会怎样" class="header-anchor">#</a> 不做模块解析会怎样？</h3> <p><img src="/assets/img/image-1.f6949075.png" alt="alt text">
如果某个模块不做解析，该模块经过loader处理后的代码就是最终代码。</p> <p>如果没有loader对该模块进行处理，该模块的源码就是最终打包结果的代码。</p> <p>如果不对某个模块进行解析，可以缩短构建时间</p> <h3 id="哪些模块不需要解析"><a href="#哪些模块不需要解析" class="header-anchor">#</a> 哪些模块不需要解析？</h3> <p>模块中无其他依赖：一些已经打包好的第三方库，比如jquery</p> <h3 id="如何让某个模块不要解析"><a href="#如何让某个模块不要解析" class="header-anchor">#</a> 如何让某个模块不要解析？</h3> <p>配置<code>module.noParse</code>，它是一个正则，被正则匹配到的模块不会解析</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
    module: {
        noParse: /test/
    }
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="优化loader性能"><a href="#优化loader性能" class="header-anchor">#</a> 优化loader性能</h2> <h3 id="进一步限制loader的应用范围"><a href="#进一步限制loader的应用范围" class="header-anchor">#</a> 进一步限制loader的应用范围</h3> <p>思路是：对于某些库，不使用loader</p> <p>例如：babel-loader可以转换ES6或更高版本的语法，可是有些库本身就是用ES5语法书写的，不需要转换，使用babel-loader反而会浪费构建时间</p> <p>lodash就是这样的一个库</p> <blockquote><p>lodash是在ES5之前出现的库，使用的是ES3语法</p></blockquote> <p>通过<code>module.rule.exclude</code>或<code>module.rule.include</code>，排除或仅包含需要应用loader的场景</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
    module: {
        rules: [
            {
                test: /\.js$/,
                exclude: /lodash/,
                //  exclude: /node_modules/, 如果暴力点直接排除node_modules
                use: &quot;babel-loader&quot;
            }
        ]
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>这种做法是对loader的范围进行进一步的限制，和noParse不冲突，因为流程是：拿到源代码后-&gt;loader处理-&gt;抽象语法转换、依赖分析等
noParse影响得是抽象语法转换、依赖分析等这个过程，而exclude影响得是loader处理这个过程</p></blockquote> <h3 id="缓存loader的结果"><a href="#缓存loader的结果" class="header-anchor">#</a> 缓存loader的结果</h3> <p>我们可以基于一种假设：如果某个文件内容不变，经过相同的loader解析后，解析后的结果也不变</p> <p>于是，可以将loader的解析结果保存下来，让后续的解析直接使用保存的结果</p> <p><code>cache-loader</code>可以实现这样的功能</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  module: {
    rules: [
      {
        test: /\.js$/,
        use: ['cache-loader', ...loaders]
      },
    ],
  },
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>有趣的是，<code>cache-loader</code>放到最前面，却能够决定后续的loader是否运行</p> <p>实际上，loader的运行过程中，还包含一个过程，即<code>pitch</code> <img src="/assets/img/image-2.3433f291.png" alt="alt text"></p> <p>pitch阶段如果发现有缓存会直接将缓存得代码像图中一样返回给执行阶段对应的loader处理。
比如：loader3有缓存，那么执行阶段只需经过loader2和loader1</p> <h3 id="为loader的运行开启多线程"><a href="#为loader的运行开启多线程" class="header-anchor">#</a> 为loader的运行开启多线程</h3> <p>thread-loader会开启一个线程池，线程池中包含适量的线程</p> <p>它会把后续的loader(配置在thread-loader之后的loader)放到线程池的线程中运行，以提高构建效率</p> <p>由于后续的loader会放到新的线程中，所以，后续的loader不能：</p> <ul><li>使用 webpack api 生成文件</li> <li>无法使用自定义的 plugin api</li> <li>无法访问 webpack options</li></ul> <blockquote><p>在实际的开发中，可以进行测试，来决定thread-loader放到什么位置</p></blockquote> <p><strong>特别注意，开启和管理线程需要消耗时间，在小型项目中使用thread-loader反而会增加构建时间</strong></p> <h2 id="热替换hmr"><a href="#热替换hmr" class="header-anchor">#</a> 热替换HMR</h2> <blockquote><p>热替换并不能降低构建时间（可能还会稍微增加），但可以降低代码改动到效果呈现的时间
当使用<code>webpack-dev-server</code>时，考虑代码改动到效果呈现的过程</p></blockquote> <p><img src="/assets/img/image-3.57f83be0.png" alt="alt text"></p> <p>而使用了热替换后，流程发生了变化
<img src="/assets/img/image-4.1db9d4da.png" alt="alt text"></p> <h3 id="使用和原理"><a href="#使用和原理" class="header-anchor">#</a> 使用和原理</h3> <ol><li>更改配置</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  devServer:{
    hot:true // 开启HMR
  },
  plugins:[ 
    // 可选
    new webpack.HotModuleReplacementPlugin()
  ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="2"><li>更改了代码</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>// index.js

if(module.hot){ // 是否开启了热更新
  module.hot.accept() // 接受热更新
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>首先，这段代码会参与最终运行！</p> <p>当开启了热更新后，<code>webpack-dev-server</code>会向打包结果中注入<code>module.hot</code>属性</p> <p>默认情况下，<code>webpack-dev-server</code>不管是否开启了热更新，当重新打包后，都会调用<code>location.reload</code>刷新页面</p> <p>但如果运行了<code>module.hot.accept()</code>，将改变这一行为</p> <p><code>module.hot.accept()</code>的作用是让<code>webpack-dev-server</code>通过<code>socket</code>管道，把服务器更新的内容发送到浏览器
<img src="/assets/img/image-5.0b0cc57b.png" alt="alt text">
然后，将结果交给插件<code>HotModuleReplacementPlugin</code>注入的代码执行</p> <p>插件<code>HotModuleReplacementPlugin</code>会根据覆盖原始代码，然后让代码重新执行</p> <p><strong>所以，热替换发生在代码运行期</strong></p> <h3 id="样式热替换"><a href="#样式热替换" class="header-anchor">#</a> 样式热替换</h3> <p>对于样式也是可以使用热替换的，但需要使用<code>style-loader</code></p> <p>因为热替换发生时，<code>HotModuleReplacementPlugin</code>只会简单的重新运行模块代码</p> <p>因此<code>style-loader</code>的代码一运行，就会重新设置<code>style</code>元素中的样式</p> <p>而<code>mini-css-extract-plugin</code>，由于它生成文件是在<strong>构建期间</strong>，运行期间并会也无法改动文件，因此它对于热替换是无效的</p> <h2 id="手动分包"><a href="#手动分包" class="header-anchor">#</a> 手动分包</h2> <h3 id="基本原理"><a href="#基本原理" class="header-anchor">#</a> 基本原理</h3> <p>手动分包的总体思路是：</p> <ol><li>先单独的打包公共模块
<img src="/assets/img/image-6.33106b30.png" alt="alt text"></li></ol> <p>公共模块会被打包成为动态链接库(dll Dynamic Link Library)，并生成资源清单</p> <blockquote><p>简单理解dll: DLL 是一个拥有共享 API 的文件，包含可被多处引用的公共功能</p></blockquote> <ol start="2"><li>根据入口模块进行正常打包</li></ol> <p>打包时，如果发现模块中使用了资源清单中描述的模块，则不会形成下面的代码结构</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//源码，入口文件index.js
import $ from &quot;jquery&quot;
import _ from &quot;lodash&quot;
_.isArray($(&quot;.red&quot;));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>由于资源清单中包含<code>jquery</code>和<code>lodash</code>两个模块，因此打包结果的大致格式是：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function(modules){
  //...
})({
  // index.js文件的打包结果并没有变化
  &quot;./src/index.js&quot;:
  function(module, exports, __webpack_require__){
    var $ = __webpack_require__(&quot;./node_modules/jquery/index.js&quot;)
    var _ = __webpack_require__(&quot;./node_modules/lodash/index.js&quot;)
    _.isArray($(&quot;.red&quot;));
  },
  // 由于资源清单中存在，jquery的代码并不会出现在这里
  &quot;./node_modules/jquery/index.js&quot;:
  function(module, exports, __webpack_require__){
    module.exports = jquery;
  },
  // 由于资源清单中存在，lodash的代码并不会出现在这里
  &quot;./node_modules/lodash/index.js&quot;:
  function(module, exports, __webpack_require__){
    module.exports = lodash;
  }
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="打包公共模块"><a href="#打包公共模块" class="header-anchor">#</a> 打包公共模块</h3> <p>打包公共模块是一个<strong>独立的</strong>打包过程</p> <ol><li>单独打包公共模块，暴露变量名</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>// webpack.dll.config.js
module.exports = {
  mode: &quot;production&quot;,
  entry: {
    jquery: [&quot;jquery&quot;],
    lodash: [&quot;lodash&quot;]
  },
  output: {
    filename: &quot;dll/[name].js&quot;,
    library: &quot;[name]&quot;
  }
};

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="2"><li>利用<code>DllPlugin</code>生成资源清单</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>// webpack.dll.config.js
module.exports = {
  plugins: [
    new webpack.DllPlugin({
      path: path.resolve(__dirname, &quot;dll&quot;, &quot;[name].manifest.json&quot;), //资源清单的保存位置
      name: &quot;[name]&quot;//资源清单中，暴露的变量名
    })
  ]
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>运行后，即可完成公共模块打包</p> <h3 id="使用公共模块"><a href="#使用公共模块" class="header-anchor">#</a> 使用公共模块</h3> <ol><li>在页面中手动引入公共模块</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;script src=&quot;./dll/jquery.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;./dll/lodash.js&quot;&gt;&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>重新设置<code>clean-webpack-plugin</code></li></ol> <p>如果使用了插件<code>clean-webpack-plugin</code>，为了避免它把公共模块清除，需要做出以下配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new CleanWebpackPlugin({
  // 要清除的文件或目录
  // 排除掉dll目录本身和它里面的文件
  cleanOnceBeforeBuildPatterns: [&quot;**/*&quot;, '!dll', '!dll/*']
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>目录和文件的匹配规则使用的是[globbing patterns]</p></blockquote> <ol start="3"><li>使用<code>DllReferencePlugin</code>控制打包结果</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  plugins:[
    new webpack.DllReferencePlugin({
      manifest: require(&quot;./dll/jquery.manifest.json&quot;)
    }),
    new webpack.DllReferencePlugin({
      manifest: require(&quot;./dll/lodash.manifest.json&quot;)
    })
  ]
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p><strong>手动打包的过程</strong>：</p> <ol><li>开启<code>output.library</code>暴露公共模块</li> <li>用<code>DllPlugin</code>创建资源清单</li> <li>用<code>DllReferencePlugin</code>使用资源清单</li></ol> <p><strong>手动打包的注意事项</strong>：</p> <ol><li>资源清单不参与运行，可以不放到打包目录中</li> <li>记得手动引入公共JS，以及避免被删除</li> <li>不要对小型的公共JS库使用</li></ol> <p><strong>优点</strong>：</p> <ol><li>极大提升自身模块的打包速度</li> <li>极大的缩小了自身文件体积</li> <li>有利于浏览器缓存第三方库的公共代码</li></ol> <p><strong>缺点</strong>：</p> <ol><li>使用非常繁琐</li> <li>如果第三方库中包含重复代码，则效果不太理想</li></ol> <h2 id="自动分包"><a href="#自动分包" class="header-anchor">#</a> 自动分包</h2> <h3 id="基本原理-2"><a href="#基本原理-2" class="header-anchor">#</a> 基本原理</h3> <p>不同与手动分包，自动分包是从<strong>实际的角度</strong>出发，从一个更加<strong>宏观的角度</strong>来控制分包，而一般不对具体哪个包要分出去进行控制</p> <p>因此使用自动分包，不仅非常方便，而且更加贴合实际的开发需要</p> <p>要控制自动分包，关键是要配置一个合理的<strong>分包策略</strong></p> <p>有了分包策略之后，不需要额外安装任何插件，webpack会自动的按照策略进行分包</p> <blockquote><p>实际上，webpack在内部是使用<code>SplitChunksPlugin</code>进行分包的
<img src="/assets/img/image-7.f268a081.png" alt="alt text"></p></blockquote> <p>从分包流程中至少可以看出以下几点：</p> <ul><li>分包策略至关重要，它决定了如何分包</li> <li>分包时，webpack开启了一个<strong>新的chunk</strong>，对分离的模块进行打包</li> <li>打包结果中，公共的部分被提取出来形成了一个单独的文件，它是新chunk的产物</li></ul> <h3 id="分包策略的基本配置"><a href="#分包策略的基本配置" class="header-anchor">#</a> 分包策略的基本配置</h3> <p>webpack提供了<code>optimization</code>配置项，用于配置一些优化信息</p> <p>其中<code>splitChunks</code>是分包策略的配置</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  optimization: {
    splitChunks: {
      // 分包策略
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>事实上，分包策略有其默认的配置，我们只需要轻微的改动，即可应对大部分分包场景</p> <ol><li>chunks</li></ol> <p>该配置项用于配置需要应用分包策略的chunk</p> <p>我们知道，分包是从已有的chunk中分离出新的chunk，那么哪些chunk需要分离呢</p> <p>chunks有三个取值，分别是：</p> <ul><li>all: 对于所有的chunk都要应用分包策略</li> <li>async：【默认】仅针对异步chunk应用分包策略</li> <li>initial：仅针对普通chunk应用分包策略</li></ul> <p>所以，你只需要配置<code>chunks</code>为<code>all</code>即可</p> <ol start="2"><li>maxSize</li></ol> <p>该配置可以控制包的最大字节数</p> <p>如果某个包（包括分出来的包）超过了该值，则webpack会尽可能的将其分离成多个包</p> <p>但是不要忽略的是，分包的<strong>基础单位是模块</strong>，如果一个完整的模块超过了该体积，它是无法做到再切割的，因此，尽管使用了这个配置，完全有可能某个包还是会超过这个体积</p> <p>另外，该配置看上去很美妙，实际意义其实不大</p> <p>因为分包的目的是<strong>提取大量的公共代码</strong>，从而减少总体积和充分利用浏览器缓存</p> <p>虽然该配置可以把一些包进行再切分，但是实际的总体积和传输量并没有发生变化</p> <blockquote><p>如果要进一步减少公共模块的体积，只能是压缩和<code>tree shaking</code></p></blockquote> <h3 id="分包策略的其他配置"><a href="#分包策略的其他配置" class="header-anchor">#</a> 分包策略的其他配置</h3> <p>如果不想使用其他配置的默认值，可以手动进行配置：</p> <ul><li>automaticNameDelimiter：新chunk名称的分隔符，默认值~</li> <li>minChunks：一个模块被多少个chunk使用时，才会进行分包，默认值1</li> <li>minSize：当分包达到多少字节后才允许被真正的拆分，默认值30000</li></ul> <h3 id="缓存组"><a href="#缓存组" class="header-anchor">#</a> 缓存组</h3> <p>之前配置的分包策略是全局的</p> <p>而实际上，分包策略是基于缓存组的</p> <p>每个缓存组提供一套独有的策略，webpack按照缓存组的优先级依次处理每个缓存组，被缓存组处理过的分包不需要再次分包</p> <p>默认情况下，webpack提供了两个缓存组：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  optimization:{
    splitChunks: {
      //全局配置
      cacheGroups: {
        // 属性名是缓存组名称，会影响到分包的chunk名
        // 属性值是缓存组的配置，缓存组继承所有的全局配置，也有自己特殊的配置
        vendors: { 
          test: /[\\/]node_modules[\\/]/, // 当匹配到相应模块时，将这些模块进行单独打包
          priority: -10 // 缓存组优先级，优先级越高，该策略越先进行处理，默认值为0
        },
        default: {
          minChunks: 2,  // 覆盖全局配置，将最小chunk引用数改为2
          priority: -20, // 优先级
          reuseExistingChunk: true // 重用已经被分离出去的chunk
        }
      }
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>很多时候，缓存组对于我们来说没什么意义，因为默认的缓存组就已经够用了</p> <p>但是我们同样可以利用缓存组来完成一些事情，比如对公共样式的抽离</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>module.exports = {
  optimization: {
    splitChunks: {
      chunks: &quot;all&quot;,
      cacheGroups: {
        styles: {
          test: /\.css$/, // 匹配样式模块
          minSize: 0, // 覆盖默认的最小尺寸，这里仅仅是作为测试
          minChunks: 2 // 覆盖默认的最小chunk引用数
        }
      }
    }
  },
  module: {
    rules: [{ test: /\.css$/, use: [MiniCssExtractPlugin.loader, &quot;css-loader&quot;] }]
  },
  plugins: [
    new CleanWebpackPlugin(),
    new HtmlWebpackPlugin({
      template: &quot;./public/index.html&quot;,
      chunks: [&quot;index&quot;]
    }),
    new MiniCssExtractPlugin({
      filename: &quot;[name].[hash:5].css&quot;,
      // chunkFilename是配置来自于分割chunk的文件名
      chunkFilename: &quot;common.[hash:5].css&quot; 
    })
  ]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="配合多页应用"><a href="#配合多页应用" class="header-anchor">#</a> 配合多页应用</h3> <p>虽然现在单页应用是主流，但免不了还是会遇到多页应用</p> <p>由于在多页应用中需要为每个html页面指定需要的chunk，这就造成了问题</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new HtmlWebpackPlugin({
  template: &quot;./public/index.html&quot;,
  chunks: [&quot;index~other&quot;, &quot;vendors~index~other&quot;, &quot;index&quot;]
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>我们必须手动的指定被分离出去的chunk名称，这不是一种好办法</p> <p>幸好<code>html-webpack-plugin</code>的新版本中解决了这一问题</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> i <span class="token parameter variable">-D</span> html-webpack-plugin@next
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>做出以下配置即可：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new HtmlWebpackPlugin({
  template: &quot;./public/index.html&quot;,
  chunks: [&quot;index&quot;]
})
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>它会自动的找到被<code>index</code>分离出去的chunk，并完成引用</p> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <p>自动分包的原理其实并不复杂，主要经过以下步骤：</p> <ol><li>检查每个chunk编译的结果</li> <li>根据分包策略，找到那些满足策略的模块</li> <li>根据分包策略，生成新的chunk打包这些模块（代码有所变化）</li> <li>把打包出去的模块从原始包中移除，并修正原始包代码</li></ol> <p>在代码层面，有以下变动</p> <ol><li>分包的代码中，加入一个全局变量，类型为数组，其中包含公共模块的代码</li> <li>原始包的代码中，使用数组中的公共代码</li></ol> <h2 id="代码压缩"><a href="#代码压缩" class="header-anchor">#</a> 代码压缩</h2> <h3 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h3> <ol><li><strong>为什么要进行代码压缩</strong></li></ol> <p>减少代码体积；破坏代码的可读性，提升破解成本；</p> <ol start="2"><li><strong>什么时候要进行代码压缩</strong></li></ol> <p>生产环境</p> <ol start="3"><li><strong>使用什么压缩工具</strong></li></ol> <p>目前最流行的代码压缩工具主要有两个：<code>UglifyJs</code>和<code>Terser</code></p> <p><code>UglifyJs</code>是一个传统的代码压缩工具，已存在多年，曾经是前端应用的必备工具，但由于它不支持<code>ES6</code>语法，所以目前的流行度已有所下降。</p> <p><code>Terser</code>是一个新起的代码压缩工具，支持<code>ES6+</code>语法，因此被很多构建工具内置使用。<code>webpack</code>安装后会内置<code>Terser</code>，当启用生产环境后即可用其进行代码压缩。</p> <p>因此，我们选择<code>Terser</code></p> <h4 id="关于副作用-side-effect"><a href="#关于副作用-side-effect" class="header-anchor">#</a> 关于副作用 side effect</h4> <p>副作用：函数运行过程中，可能会对外部环境造成影响的功能</p> <p>如果函数中包含以下代码，该函数叫做副作用函数:</p> <ul><li>异步代码</li> <li>localStorage</li> <li>对外部数据的修改</li></ul> <p>如果一个函数没有副作用，同时，函数的返回结果仅依赖参数，则该函数叫做纯函数(pure function)</p> <h3 id="terser"><a href="#terser" class="header-anchor">#</a> Terser</h3> <p>在<code>Terser</code>的官网可尝试它的压缩效果</p> <blockquote><p>Terser官网：https://terser.org/</p></blockquote> <p>webpack自动集成了Terser</p> <p>如果你想更改、添加压缩工具，又或者是想对Terser进行配置，使用下面的webpack配置即可</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const TerserPlugin = require('terser-webpack-plugin');
const OptimizeCSSAssetsPlugin = require('optimize-css-assets-webpack-plugin');
module.exports = {
  optimization: {
    // 是否要启用压缩，默认情况下，生产环境会自动开启
    minimize: true, 
    minimizer: [ // 压缩时使用的插件，可以有多个
      new TerserPlugin(), 
      new OptimizeCSSAssetsPlugin()
    ],
  },
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="tree-shaking"><a href="#tree-shaking" class="header-anchor">#</a> tree shaking</h2> <ul><li>压缩可以移除模块内部的无效代码</li> <li>tree shaking 可以移除模块之间的无效代码</li></ul> <h3 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h3> <p>某些模块导出的代码并不一定会被用到</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// myMath.js
export function add(a, b){
  console.log(&quot;add&quot;)
  return a+b;
}

export function sub(a, b){
  console.log(&quot;sub&quot;)
  return a-b;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// index.js
import {add} from &quot;./myMath&quot;
console.log(add(1,2));
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>tree shaking 用于移除掉不会用到的导出</p> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <p><code>webpack2</code>开始就支持了<code>tree shaking</code></p> <p>只要是生产环境，<code>tree shaking</code>自动开启</p> <h3 id="原理-2"><a href="#原理-2" class="header-anchor">#</a> 原理</h3> <p>webpack会从入口模块出发寻找依赖关系</p> <p>当解析一个模块时，webpack会根据ES6的模块导入语句来判断，该模块依赖了另一个模块的哪个导出</p> <p>webpack之所以选择ES6的模块导入语句，是因为ES6模块有以下特点：</p> <ol><li>导入导出语句只能是顶层语句</li> <li>import的模块名只能是字符串常量</li> <li>import绑定的变量是不可变的</li></ol> <p>这些特征都非常有利于分析出稳定的依赖</p> <p>在具体分析依赖时，webpack坚持的原则是：<strong>保证代码正常运行，然后再尽量tree shaking</strong></p> <p>所以，如果你依赖的是一个导出的对象，由于JS语言的动态特性，以及<code>webpack</code>还不够智能，为了保证代码正常运行，它不会移除对象中的任何信息</p> <p>因此，我们在编写代码的时候，<strong>尽量</strong>：</p> <ul><li>使用<code>export xxx</code>导出，而不使用<code>export default {xxx}</code>导出</li> <li>使用<code>import {xxx} from &quot;xxx&quot;</code>导入，而不使用<code>import xxx from &quot;xxx&quot;</code>导入</li></ul> <p>依赖分析完毕后，<code>webpack</code>会根据每个模块每个导出是否被使用，标记其他导出为<code>dead code</code>，然后交给代码压缩工具处理</p> <p>代码压缩工具最终移除掉那些<code>dead code</code>代码</p> <h3 id="使用第三方库"><a href="#使用第三方库" class="header-anchor">#</a> 使用第三方库</h3> <p>某些第三方库可能使用的是<code>commonjs</code>的方式导出，比如<code>lodash</code></p> <p>又或者没有提供普通的ES6方式导出</p> <p>对于这些库，<code>tree shaking</code>是无法发挥作用的</p> <p>因此要寻找这些库的<code>es6</code>版本，好在很多流行但没有使用的<code>ES6</code>的第三方库，都发布了它的<code>ES6</code>版本，比如<code>lodash-es</code></p> <h3 id="作用域分析"><a href="#作用域分析" class="header-anchor">#</a> 作用域分析</h3> <p><code>tree shaking</code>本身并没有完善的作用域分析，可能导致在一些<code>dead code</code>函数中的依赖仍然会被视为依赖</p> <p>插件<code>webpack-deep-scope-plugin</code>提供了作用域分析，可解决这些问题</p> <h3 id="副作用问题"><a href="#副作用问题" class="header-anchor">#</a> 副作用问题</h3> <p>webpack在<code>tree shaking</code>的使用，有一个原则：<strong>一定要保证代码正确运行</strong></p> <p>在满足该原则的基础上，再来决定如何<code>tree shaking</code></p> <p>因此，当<code>webpack</code>无法确定某个模块是否有副作用时，它往往将其视为有副作用</p> <p>因此，某些情况可能并不是我们所想要的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/common.js
var n  = Math.random();

//index.js
import &quot;./common.js&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>虽然我们根本没用有<code>common.js</code>的导出，但<code>webpack</code>担心<code>common.js</code>有副作用，如果去掉会影响某些功能</p> <p>如果要解决该问题，就需要标记该文件是没有副作用的
在<code>package.json</code>中加入<code>sideEffects</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;sideEffects&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>有两种配置方式：</p> <ul><li>false：当前工程中，所有模块都没有副作用。注意，这种写法会影响到某些css文件的导入</li> <li>数组：设置哪些文件拥有副作用，例如：<code>[&quot;!src/common.js&quot;]</code>，表示只要不是<code>src/common.js</code>的文件，都有副作用</li></ul> <blockquote><p>这种方式我们一般不处理，通常是一些第三方库在它们自己的<code>package.json</code>中标注</p></blockquote> <h3 id="css-tree-shaking"><a href="#css-tree-shaking" class="header-anchor">#</a> css tree shaking</h3> <p>webpack<code>无法对</code>css<code>完成</code>tree shaking<code>，因为</code>css<code>跟</code>es6`没有半毛钱关系</p> <p>因此对<code>css</code>的<code>tree shaking</code>需要其他插件完成</p> <p>例如：<code>purgecss-webpack-plugin</code></p> <blockquote><p>注意：<code>purgecss-webpack-plugin</code>对<code>css module</code>无能为力</p></blockquote> <h2 id="懒加载"><a href="#懒加载" class="header-anchor">#</a> 懒加载</h2> <p>页面也开始不需要加载那么多js，很多js是用户有了操作行为之后才会加载的!</p> <h3 id="使用-2"><a href="#使用-2" class="header-anchor">#</a> 使用</h3> <p>用import()语法，可以实现懒加载</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 理解成jsonp,浏览器会用jsonp的方式远程去读取一个js模块
// import()会返回一个promise   （* as obj）
const {chunk} = await import(&quot;lodash-es&quot;)


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>注：不能用require,因为require会进行依赖分析从而被打包进去
注：import()无法tree shaking</p></blockquote> <h3 id="原理-3"><a href="#原理-3" class="header-anchor">#</a> 原理</h3> <p>类似于自动分包会有个全局变量webpackJsonp，当模块异步加载好了会放到里面</p> <h2 id="eslint"><a href="#eslint" class="header-anchor">#</a> eslint</h2> <p>ESLint是一个针对JS的代码风格<strong>检查</strong>工具，当不满足其要求的风格时，会给予警告或错误</p> <h3 id="使用-3"><a href="#使用-3" class="header-anchor">#</a> 使用</h3> <p>ESLint通常配合编辑器使用</p> <ol><li>在vscode中安装<code>ESLint</code></li></ol> <p>该工具会自动检查工程中的JS文件</p> <p>检查的工作交给<code>eslint</code>库，如果当前工程没有，则会去全局库中查找，如果都没有，则无法完成检查</p> <p>另外，检查的依据是<code>eslint</code>的配置文件<code>.eslintrc</code>，如果找不到工程中的配置文件，也无法完成检查</p> <ol start="2"><li>安装<code>eslint</code></li></ol> <p><code>npm i [-g] eslint</code></p> <ol start="3"><li>创建配置文件</li></ol> <p>可以通过<code>eslint</code>交互式命令创建配置文件</p> <blockquote><p>由于windows环境中git窗口对交互式命名支持不是很好，建议使用powershell</p></blockquote> <p><code>npx eslint --init</code></p> <blockquote><p>eslint会识别工程中的<code>.eslintrc.*</code>文件，也能够识别<code>package.json</code>中的<code>eslintConfig</code>字段</p></blockquote> <h3 id="配置项"><a href="#配置项" class="header-anchor">#</a> 配置项</h3> <h4 id="env"><a href="#env" class="header-anchor">#</a> env</h4> <p>配置代码的运行环境</p> <ul><li>browser：代码是否在浏览器环境中运行</li> <li>es6：是否启用ES6的全局API，例如<code>Promise</code>等</li></ul> <h4 id="parseroptions"><a href="#parseroptions" class="header-anchor">#</a> parserOptions</h4> <p>该配置指定<code>eslint</code>对哪些语法的支持</p> <ul><li>ecmaVersion: 支持的ES语法版本</li> <li>sourceType
<ul><li>script：传统脚本</li> <li>module：模块化脚本</li></ul></li></ul> <h4 id="parser"><a href="#parser" class="header-anchor">#</a> parser</h4> <p><code>eslint</code>的工作原理是先将代码进行解析，然后按照规则进行分析</p> <p><code>eslint</code> 默认使用<code>Espree</code>作为其解析器，你可以在配置文件中指定一个不同的解析器。</p> <h4 id="globals"><a href="#globals" class="header-anchor">#</a> globals</h4> <p>配置可以使用的额外的全局变量</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;globals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;var1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;readonly&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;var2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;writable&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>eslint</code>支持注释形式的配置，在代码中使用下面的注释也可以完成配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* global var1, var2 */</span>
<span class="token comment">/* global var3:writable, var4:writable */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="extends"><a href="#extends" class="header-anchor">#</a> extends</h4> <p>该配置继承自哪里</p> <p>它的值可以是字符串或者数组</p> <p>比如：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint:recommended&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>表示，该配置缺失的位置，使用<code>eslint</code>推荐的规则</p> <h4 id="ignorefiles"><a href="#ignorefiles" class="header-anchor">#</a> ignoreFiles</h4> <p>排除掉某些不需要验证的文件</p> <p><code>.eslintignore</code></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>dist/**/*.js
node_modules
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="rules"><a href="#rules" class="header-anchor">#</a> rules</h4> <p><code>eslint</code>规则集</p> <p>每条规则影响某个方面的代码风格</p> <p>每条规则都有下面几个取值：</p> <ul><li>off 或 0 或 false: 关闭该规则的检查</li> <li>warn 或 1 或 true：警告，不会导致程序退出</li> <li>error 或 2：错误，当被触发的时候，程序会退出</li></ul> <p>除了在配置文件中使用规则外，还可以在注释中使用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* eslint eqeqeq: &quot;off&quot;, curly: &quot;error&quot; */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>https://eslint.bootcss.com/docs/rules/</p></blockquote> <h2 id="bundle-analyzer"><a href="#bundle-analyzer" class="header-anchor">#</a> bundle analyzer</h2> <p>对打包结果进行分析，一个可以帮助我们优化决策的工具</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>webpack.config.js

const WebpackBundleAnalyzer = require(&quot;webpack-bundle-analyzer&quot;)
  .BundleAnalyzerPlugin;

module.exports = {
  plugins: [new WebpackBundleAnalyzer()],
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>该插件会生成一个html文件，展示打包结果的各个模块的体积</p> <h2 id="gzip"><a href="#gzip" class="header-anchor">#</a> gzip</h2> <p>gzip是一种压缩文件的算法</p> <h3 id="b-s结构中的压缩传输"><a href="#b-s结构中的压缩传输" class="header-anchor">#</a> B/S结构中的压缩传输</h3> <p><img src="/assets/img/image-8.741a436b.png" alt="alt text"></p> <p>优点：传输效率可能得到大幅提升</p> <p>缺点：服务器的压缩需要时间，客户端的解压需要时间</p> <h3 id="压缩和解压的本质"><a href="#压缩和解压的本质" class="header-anchor">#</a> 压缩和解压的本质</h3> <p>压缩：读一个原始文件，变成二进制格式，将文件中有重复的字符进行合并，然后用一种方式记录原来的位置信息
解压就是根据位置信息进行还原</p> <h3 id="使用webpack进行预压缩"><a href="#使用webpack进行预压缩" class="header-anchor">#</a> 使用webpack进行预压缩</h3> <p>使用<code>compression-webpack-plugin</code>插件对打包结果进行预压缩，可以移除服务器的压缩时间</p> <p><img src="/assets/img/image-9.abab79e7.png" alt="alt text"></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const CmpressionWebpackPlugin = require(&quot;compression-webpack-plugin&quot;)

module.exports = {
  plugins: [new CmpressionWebpackPlugin({
    test: /\.js$|\.css$|\.html$/,
    minRatio: 0.5
  })],
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/7/2024, 2:08:30 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#概述" class="sidebar-link reco-side-概述" data-v-b57cc07c>概述</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#构建性能" class="sidebar-link reco-side-构建性能" data-v-b57cc07c>构建性能</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#传输性能" class="sidebar-link reco-side-传输性能" data-v-b57cc07c>传输性能</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#运行性能" class="sidebar-link reco-side-运行性能" data-v-b57cc07c>运行性能</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#减少模块解析" class="sidebar-link reco-side-减少模块解析" data-v-b57cc07c>减少模块解析</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#什么叫做模块解析" class="sidebar-link reco-side-什么叫做模块解析" data-v-b57cc07c>什么叫做模块解析？</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#不做模块解析会怎样" class="sidebar-link reco-side-不做模块解析会怎样" data-v-b57cc07c>不做模块解析会怎样？</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#哪些模块不需要解析" class="sidebar-link reco-side-哪些模块不需要解析" data-v-b57cc07c>哪些模块不需要解析？</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#如何让某个模块不要解析" class="sidebar-link reco-side-如何让某个模块不要解析" data-v-b57cc07c>如何让某个模块不要解析？</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#优化loader性能" class="sidebar-link reco-side-优化loader性能" data-v-b57cc07c>优化loader性能</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#进一步限制loader的应用范围" class="sidebar-link reco-side-进一步限制loader的应用范围" data-v-b57cc07c>进一步限制loader的应用范围</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#缓存loader的结果" class="sidebar-link reco-side-缓存loader的结果" data-v-b57cc07c>缓存loader的结果</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#为loader的运行开启多线程" class="sidebar-link reco-side-为loader的运行开启多线程" data-v-b57cc07c>为loader的运行开启多线程</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#热替换hmr" class="sidebar-link reco-side-热替换hmr" data-v-b57cc07c>热替换HMR</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#使用和原理" class="sidebar-link reco-side-使用和原理" data-v-b57cc07c>使用和原理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#样式热替换" class="sidebar-link reco-side-样式热替换" data-v-b57cc07c>样式热替换</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#手动分包" class="sidebar-link reco-side-手动分包" data-v-b57cc07c>手动分包</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#基本原理" class="sidebar-link reco-side-基本原理" data-v-b57cc07c>基本原理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#打包公共模块" class="sidebar-link reco-side-打包公共模块" data-v-b57cc07c>打包公共模块</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#使用公共模块" class="sidebar-link reco-side-使用公共模块" data-v-b57cc07c>使用公共模块</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#总结" class="sidebar-link reco-side-总结" data-v-b57cc07c>总结</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#自动分包" class="sidebar-link reco-side-自动分包" data-v-b57cc07c>自动分包</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#基本原理-2" class="sidebar-link reco-side-基本原理-2" data-v-b57cc07c>基本原理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#分包策略的基本配置" class="sidebar-link reco-side-分包策略的基本配置" data-v-b57cc07c>分包策略的基本配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#分包策略的其他配置" class="sidebar-link reco-side-分包策略的其他配置" data-v-b57cc07c>分包策略的其他配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#缓存组" class="sidebar-link reco-side-缓存组" data-v-b57cc07c>缓存组</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#配合多页应用" class="sidebar-link reco-side-配合多页应用" data-v-b57cc07c>配合多页应用</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#原理" class="sidebar-link reco-side-原理" data-v-b57cc07c>原理</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#代码压缩" class="sidebar-link reco-side-代码压缩" data-v-b57cc07c>代码压缩</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#前言" class="sidebar-link reco-side-前言" data-v-b57cc07c>前言</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#terser" class="sidebar-link reco-side-terser" data-v-b57cc07c>Terser</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#tree-shaking" class="sidebar-link reco-side-tree-shaking" data-v-b57cc07c>tree shaking</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#背景" class="sidebar-link reco-side-背景" data-v-b57cc07c>背景</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#使用" class="sidebar-link reco-side-使用" data-v-b57cc07c>使用</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#原理-2" class="sidebar-link reco-side-原理-2" data-v-b57cc07c>原理</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#使用第三方库" class="sidebar-link reco-side-使用第三方库" data-v-b57cc07c>使用第三方库</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#作用域分析" class="sidebar-link reco-side-作用域分析" data-v-b57cc07c>作用域分析</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#副作用问题" class="sidebar-link reco-side-副作用问题" data-v-b57cc07c>副作用问题</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#css-tree-shaking" class="sidebar-link reco-side-css-tree-shaking" data-v-b57cc07c>css tree shaking</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#懒加载" class="sidebar-link reco-side-懒加载" data-v-b57cc07c>懒加载</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#使用-2" class="sidebar-link reco-side-使用-2" data-v-b57cc07c>使用</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#原理-3" class="sidebar-link reco-side-原理-3" data-v-b57cc07c>原理</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#eslint" class="sidebar-link reco-side-eslint" data-v-b57cc07c>eslint</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#使用-3" class="sidebar-link reco-side-使用-3" data-v-b57cc07c>使用</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#配置项" class="sidebar-link reco-side-配置项" data-v-b57cc07c>配置项</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#bundle-analyzer" class="sidebar-link reco-side-bundle-analyzer" data-v-b57cc07c>bundle analyzer</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#gzip" class="sidebar-link reco-side-gzip" data-v-b57cc07c>gzip</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#b-s结构中的压缩传输" class="sidebar-link reco-side-b-s结构中的压缩传输" data-v-b57cc07c>B/S结构中的压缩传输</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#压缩和解压的本质" class="sidebar-link reco-side-压缩和解压的本质" data-v-b57cc07c>压缩和解压的本质</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/FrontEndLearn/webpack5.html#使用webpack进行预压缩" class="sidebar-link reco-side-使用webpack进行预压缩" data-v-b57cc07c>使用webpack进行预压缩</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.345559c1.js" defer></script><script src="/assets/js/3.356cc003.js" defer></script><script src="/assets/js/1.02f963b0.js" defer></script><script src="/assets/js/9.d7966b29.js" defer></script>
  </body>
</html>
